{"version":3,"file":"useComboboxToggle.js","names":["useRef","useEffect","ComboboxState","visibleStates","SUGGESTING","NAVIGATING","INTERACTING","getIsVisible","state","includes","useComboboxToggle","option","onOpen","onClose","isVisible","isVisibleRef","current"],"sources":["../../../../../../src/Form/Inputs/Combobox/utils/useComboboxToggle.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\n// Much of the following is pulled from https://github.com/reach/reach-ui\n// because their work is fantastic (but is not in TypeScript)\n\nimport { useRef, useEffect } from 'react'\nimport type {\n  ComboboxCallback,\n  MaybeComboboxOptionObject,\n  ComboboxOptionType,\n} from '../types'\nimport { ComboboxState } from '../utils/state'\n\nconst visibleStates = [\n  ComboboxState.SUGGESTING,\n  ComboboxState.NAVIGATING,\n  ComboboxState.INTERACTING,\n]\nexport const getIsVisible = (state: ComboboxState) =>\n  visibleStates.includes(state)\n\n// Detect when to call onOpen and onClose\nexport function useComboboxToggle<\n  TOption extends ComboboxOptionType = MaybeComboboxOptionObject\n>(\n  state: ComboboxState,\n  option: TOption,\n  onOpen?: ComboboxCallback<TOption>,\n  onClose?: ComboboxCallback<TOption>\n) {\n  const isVisible = getIsVisible(state)\n  const isVisibleRef = useRef(isVisible)\n\n  useEffect(() => {\n    if (isVisible && !isVisibleRef.current) {\n      onOpen && onOpen(option)\n      isVisibleRef.current = true\n    } else if (!isVisible && isVisibleRef.current) {\n      onClose && onClose(option)\n      isVisibleRef.current = false\n    }\n  }, [isVisible, isVisibleRef, onOpen, onClose, option])\n\n  return isVisible\n}\n"],"mappings":";;AAQA,SAASA,MAAM,EAAEC,SAAS,QAAQ,OAAO;AAMzC,SAASC,aAAa,QAAQ,gBAAgB;AAE9C,MAAMC,aAAa,GAAG,CACpBD,aAAa,CAACE,UAAU,EACxBF,aAAa,CAACG,UAAU,EACxBH,aAAa,CAACI,WAAW,CAC1B;AACD,OAAO,MAAMC,YAAY,GAAIC,KAAoB,IAC/CL,aAAa,CAACM,QAAQ,CAACD,KAAK,CAAC;;AAG/B,OAAO,SAASE,iBAAiB,CAG/BF,KAAoB,EACpBG,MAAe,EACfC,MAAkC,EAClCC,OAAmC,EACnC;EACA,MAAMC,SAAS,GAAGP,YAAY,CAACC,KAAK,CAAC;EACrC,MAAMO,YAAY,GAAGf,MAAM,CAACc,SAAS,CAAC;EAEtCb,SAAS,CAAC,MAAM;IACd,IAAIa,SAAS,IAAI,CAACC,YAAY,CAACC,OAAO,EAAE;MACtCJ,MAAM,IAAIA,MAAM,CAACD,MAAM,CAAC;MACxBI,YAAY,CAACC,OAAO,GAAG,IAAI;IAC7B,CAAC,MAAM,IAAI,CAACF,SAAS,IAAIC,YAAY,CAACC,OAAO,EAAE;MAC7CH,OAAO,IAAIA,OAAO,CAACF,MAAM,CAAC;MAC1BI,YAAY,CAACC,OAAO,GAAG,KAAK;IAC9B;EACF,CAAC,EAAE,CAACF,SAAS,EAAEC,YAAY,EAAEH,MAAM,EAAEC,OAAO,EAAEF,MAAM,CAAC,CAAC;EAEtD,OAAOG,SAAS;AAClB"}