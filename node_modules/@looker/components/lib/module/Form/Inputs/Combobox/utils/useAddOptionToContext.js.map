{"version":3,"file":"useAddOptionToContext.js","names":["useEffect","useRef","useContext","useAddOptionToContext","context","value","label","scrollIntoView","optionsRef","windowingPropRef","indexRef","option","optionsRefCurrent","current","windowing","splice","push","index","indexOf"],"sources":["../../../../../../src/Form/Inputs/Combobox/utils/useAddOptionToContext.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Context } from 'react'\nimport { useEffect, useRef, useContext } from 'react'\nimport type {\n  ComboboxContextProps,\n  ComboboxMultiContextProps,\n} from '../ComboboxContext'\n\nexport function useAddOptionToContext<\n  CProps extends ComboboxContextProps | ComboboxMultiContextProps\n>(\n  context: Context<CProps>,\n  value: string,\n  label?: string,\n  scrollIntoView?: boolean\n) {\n  const { optionsRef, windowingPropRef } = useContext(context)\n  const indexRef = useRef<number>(-1)\n\n  useEffect(() => {\n    const option = { label, scrollIntoView, value }\n    const optionsRefCurrent = optionsRef && optionsRef.current\n    const windowing = windowingPropRef && windowingPropRef.current\n    if (optionsRefCurrent && !windowing) {\n      // Was this option already in the list?\n      // If so, re-insert it at the same spot\n      if (indexRef.current > -1) {\n        optionsRefCurrent.splice(indexRef.current, 0, option)\n      } else {\n        optionsRefCurrent.push(option)\n      }\n    }\n    return () => {\n      // Delete option from the array but save the index so it can be re-inserted there\n      if (optionsRefCurrent && !windowing) {\n        const index = optionsRefCurrent.indexOf(option)\n        indexRef.current = index\n        optionsRefCurrent.splice(index, 1)\n      }\n    }\n  }, [value, label, optionsRef, scrollIntoView, windowingPropRef])\n}\n"],"mappings":";;AAMA,SAASA,SAAS,EAAEC,MAAM,EAAEC,UAAU,QAAQ,OAAO;AAMrD,OAAO,SAASC,qBAAqB,CAGnCC,OAAwB,EACxBC,KAAa,EACbC,KAAc,EACdC,cAAwB,EACxB;EACA,MAAM;IAAEC,UAAU;IAAEC;EAAiB,CAAC,GAAGP,UAAU,CAACE,OAAO,CAAC;EAC5D,MAAMM,QAAQ,GAAGT,MAAM,CAAS,CAAC,CAAC,CAAC;EAEnCD,SAAS,CAAC,MAAM;IACd,MAAMW,MAAM,GAAG;MAAEL,KAAK;MAAEC,cAAc;MAAEF;IAAM,CAAC;IAC/C,MAAMO,iBAAiB,GAAGJ,UAAU,IAAIA,UAAU,CAACK,OAAO;IAC1D,MAAMC,SAAS,GAAGL,gBAAgB,IAAIA,gBAAgB,CAACI,OAAO;IAC9D,IAAID,iBAAiB,IAAI,CAACE,SAAS,EAAE;MAGnC,IAAIJ,QAAQ,CAACG,OAAO,GAAG,CAAC,CAAC,EAAE;QACzBD,iBAAiB,CAACG,MAAM,CAACL,QAAQ,CAACG,OAAO,EAAE,CAAC,EAAEF,MAAM,CAAC;MACvD,CAAC,MAAM;QACLC,iBAAiB,CAACI,IAAI,CAACL,MAAM,CAAC;MAChC;IACF;IACA,OAAO,MAAM;MAEX,IAAIC,iBAAiB,IAAI,CAACE,SAAS,EAAE;QACnC,MAAMG,KAAK,GAAGL,iBAAiB,CAACM,OAAO,CAACP,MAAM,CAAC;QAC/CD,QAAQ,CAACG,OAAO,GAAGI,KAAK;QACxBL,iBAAiB,CAACG,MAAM,CAACE,KAAK,EAAE,CAAC,CAAC;MACpC;IACF,CAAC;EACH,CAAC,EAAE,CAACZ,KAAK,EAAEC,KAAK,EAAEE,UAAU,EAAED,cAAc,EAAEE,gBAAgB,CAAC,CAAC;AAClE"}