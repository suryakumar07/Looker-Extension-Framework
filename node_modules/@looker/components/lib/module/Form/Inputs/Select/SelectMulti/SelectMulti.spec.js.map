{"version":3,"file":"SelectMulti.spec.js","names":["firePasteEvent","renderWithTheme","act","cleanup","fireEvent","screen","React","SelectMulti","beforeEach","jest","useFakeTimers","afterEach","runOnlyPendingTimers","useRealTimers","runTimers","basicOptions","label","value","describe","test","click","getByPlaceholderText","select","getByText","closest","expect","not","toHaveClass","toHaveStyle","focus","mouseDown","mouseUp","blur","document","options","fn","toBeVisible","getAllByRole","toHaveLength","TestComponent","values","setValues","useState","handleFilter","input","change","target","toHaveValue","cheeses","term","setTerm","useMemo","filter","cheese","toUpperCase","indexOf","bar","getAllByText","queryByText","toBeInTheDocument","keyDown","key","onChangeMock","toHaveBeenCalled","toHaveBeenCalledWith","getByRole","queryByRole","hiddenInput","getByTestId","metaKey","toHaveDisplayValue"],"sources":["../../../../../../src/Form/Inputs/Select/SelectMulti/SelectMulti.spec.tsx"],"sourcesContent":["/*\n\n MIT License\n\n Copyright (c) 2022 Looker Data Sciences, Inc.\n\n Permission is hereby granted, free of charge, to any person obtaining a copy\n of this software and associated documentation files (the \"Software\"), to deal\n in the Software without restriction, including without limitation the rights\n to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n copies of the Software, and to permit persons to whom the Software is\n furnished to do so, subject to the following conditions:\n\n The above copyright notice and this permission notice shall be included in all\n copies or substantial portions of the Software.\n\n THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n SOFTWARE.\n\n */\n\nimport { firePasteEvent, renderWithTheme } from '@looker/components-test-utils'\nimport { act, cleanup, fireEvent, screen } from '@testing-library/react'\nimport React from 'react'\n\nimport { SelectMulti } from './SelectMulti'\n\nbeforeEach(() => {\n  jest.useFakeTimers()\n})\n\nafterEach(() => {\n  jest.runOnlyPendingTimers()\n  jest.useRealTimers()\n})\n\nconst runTimers = () =>\n  act(() => {\n    jest.runOnlyPendingTimers()\n  })\n\nafterEach(cleanup)\n\nconst basicOptions = [\n  { label: 'Foo', value: 'FOO' },\n  { label: 'Bar', value: 'BAR' },\n]\n\ndescribe('SelectMulti', () => {\n  test('ripple effect', () => {\n    renderWithTheme(\n      <SelectMulti\n        options={[\n          { label: 'Cheddar', value: 'cheddar' },\n          { label: 'Gouda', value: 'gouda' },\n          { label: 'Swiss', value: 'swiss' },\n        ]}\n        placeholder=\"SelectMulti\"\n      ></SelectMulti>\n    )\n\n    fireEvent.click(screen.getByPlaceholderText('SelectMulti'))\n\n    const select = screen.getByText('Cheddar').closest('li')\n    expect(select).not.toHaveClass('bg-on fg-in')\n    expect(select).toHaveStyle({\n      '--ripple-color': '#71767a',\n      '--ripple-scale-end': '1',\n      '--ripple-scale-start': '0.1',\n      '--ripple-size': '100%',\n      '--ripple-translate': '0, 0',\n    })\n\n    select && fireEvent.focus(select)\n    expect(select).toHaveClass('bg-on')\n\n    select && fireEvent.mouseDown(select)\n    expect(select).toHaveClass('bg-on fg-in')\n\n    // foreground is locked for a minimum time to animate the ripple\n    select && fireEvent.mouseUp(select)\n    runTimers()\n    expect(select).toHaveClass('bg-on fg-out')\n    runTimers()\n    expect(select).toHaveClass('bg-on')\n\n    select && fireEvent.blur(select)\n    expect(select).not.toHaveClass('bg-on fg-in')\n    fireEvent.click(document)\n  })\n  test('values', () => {\n    const options = [\n      { label: 'Foo', value: 'FOO' },\n      { label: 'Bar', value: 'BAR' },\n      { label: 'Baz', value: 'BAZ' },\n      { label: 'Qux', value: 'QUX' },\n    ]\n    renderWithTheme(\n      <SelectMulti\n        options={options}\n        placeholder=\"Search\"\n        values={['BAZ', 'FOO']}\n        onChange={jest.fn()}\n      />\n    )\n    // should already have the 2 chips\n    expect(screen.getByText('Baz')).toBeVisible()\n    expect(screen.getByText('Foo')).toBeVisible()\n    // 2 chip remove buttons and 1 clear all button\n    expect(screen.getAllByRole('button')).toHaveLength(3)\n  })\n\n  test('defaultValues', () => {\n    const options = [\n      { label: 'Foo', value: 'FOO' },\n      { label: 'Bar', value: 'BAR' },\n      { label: 'Baz', value: 'BAZ' },\n      { label: 'Qux', value: 'QUX' },\n    ]\n    renderWithTheme(\n      <SelectMulti\n        options={options}\n        placeholder=\"Search\"\n        defaultValues={['BAR']}\n      />\n    )\n    // should already have the chip\n    expect(screen.getByText('Bar')).toBeVisible()\n    // 1 chip remove button and 1 clear all button\n    expect(screen.getAllByRole('button')).toHaveLength(2)\n  })\n\n  test('controlled value & context mismatch', () => {\n    const TestComponent = () => {\n      const [values, setValues] = React.useState<string[] | undefined>(['FOO'])\n      const handleFilter = () => {\n        // Contrived example to test how the component handles \"unexpected\" values\n        // i.e. the values prop is different from the values in context\n        // Tests a bug fix where the input value was getting lost (SELECT_SILENT)\n        setValues([])\n      }\n      return (\n        <SelectMulti\n          values={values}\n          onChange={setValues}\n          options={basicOptions}\n          isFilterable\n          onFilter={handleFilter}\n          placeholder=\"Search\"\n        />\n      )\n    }\n    renderWithTheme(<TestComponent />)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.change(input, { target: { value: 'b' } })\n    expect(input).toHaveValue('b')\n\n    fireEvent.click(document)\n  })\n\n  test('controlled, filterable', () => {\n    const cheeses = [\n      { value: 'Cheddar' },\n      { value: 'Gouda' },\n      { value: 'Swiss' },\n      { value: 'Feta' },\n      { value: 'Mascarpone' },\n      { value: 'Brie' },\n      { value: 'Mozzarella' },\n      { value: 'Cotija' },\n      { value: 'Pepperjack' },\n    ]\n\n    const TestComponent = () => {\n      const [values, setValues] = React.useState<string[] | undefined>([\n        'Cheddar',\n      ])\n      const [term, setTerm] = React.useState('')\n\n      const options = React.useMemo(() => {\n        if (term === '') return cheeses\n        return cheeses.filter(\n          cheese => cheese.value.toUpperCase().indexOf(term.toUpperCase()) > -1\n        )\n      }, [term])\n      return (\n        <SelectMulti\n          values={values}\n          onChange={setValues}\n          options={options}\n          isFilterable\n          onFilter={setTerm}\n          placeholder=\"Search\"\n        />\n      )\n    }\n\n    renderWithTheme(<TestComponent />)\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.change(input, { target: { value: 'z' } })\n    // Tests a bug fix with the controlled value behavior where SELECT_SILENT\n    // was incorrectly triggered b/c the context value had '' for label\n    // when the selected option is filtered out (faulty logic in getComboboxText)\n    expect(input).toHaveValue('z')\n\n    fireEvent.click(document)\n  })\n})\n\ndescribe('closeOnSelect', () => {\n  test('false by default', () => {\n    renderWithTheme(<SelectMulti options={basicOptions} placeholder=\"Search\" />)\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n\n    const bar = screen.getByText('Bar')\n\n    expect(screen.getByText('Foo')).toBeVisible()\n    expect(bar).toBeVisible()\n\n    fireEvent.click(bar)\n\n    expect(screen.getByText('Foo')).toBeVisible()\n    expect(screen.getAllByText('Bar')).toHaveLength(2)\n\n    fireEvent.click(document)\n  })\n\n  test('true', () => {\n    renderWithTheme(\n      <SelectMulti options={basicOptions} placeholder=\"Search\" closeOnSelect />\n    )\n\n    const input = screen.getByPlaceholderText('Search')\n    fireEvent.mouseDown(input)\n\n    const bar = screen.getByText('Bar')\n\n    expect(screen.getByText('Foo')).toBeVisible()\n    expect(bar).toBeVisible()\n\n    fireEvent.click(bar)\n    // Bar is now a chip\n    expect(screen.getByText('Bar')).toBeVisible()\n    // list has closed\n    expect(screen.queryByText('Foo')).not.toBeInTheDocument()\n\n    fireEvent.click(document)\n  })\n\n  describe('removeOnBackspace', () => {\n    test('true by default', () => {\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.getByText('Bar')).toBeVisible()\n\n      fireEvent.keyDown(input, {\n        key: 'Backspace',\n      })\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.queryByText('Bar')).not.toBeInTheDocument()\n    })\n\n    test('false', () => {\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          removeOnBackspace={false}\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.getByText('Bar')).toBeVisible()\n\n      fireEvent.keyDown(input, {\n        key: 'Backspace',\n      })\n\n      expect(screen.getByText('Foo')).toBeVisible()\n      expect(screen.queryByText('Bar')).toBeVisible()\n    })\n  })\n\n  describe('freeInput', () => {\n    test('false by default', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          onChange={onChangeMock}\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.change(input, { target: { value: 'baz,qux,' } })\n\n      expect(onChangeMock).not.toHaveBeenCalled()\n      expect(input).toHaveValue('baz,qux,')\n\n      fireEvent.click(document)\n    })\n\n    test('true', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          onChange={onChangeMock}\n          freeInput\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n\n      // Whitespace trimmed by default\n      fireEvent.change(input, { target: { value: ' baz , qux,' } })\n\n      expect(onChangeMock).toHaveBeenCalledWith(['FOO', 'BAR', 'baz', 'qux'])\n      expect(input).toHaveValue('')\n\n      fireEvent.click(document)\n    })\n\n    test('formatInputValue false', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          defaultValues={['FOO', 'BAR']}\n          placeholder=\"Search\"\n          onChange={onChangeMock}\n          freeInput\n          formatInputValue={false}\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      fireEvent.change(input, { target: { value: ' baz , qux,' } })\n\n      expect(onChangeMock).toHaveBeenCalledWith(['FOO', 'BAR', ' baz ', ' qux'])\n      expect(input).toHaveValue('')\n\n      fireEvent.click(document)\n    })\n\n    test('creates value and closes list on blur', async () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <>\n          <button>A random button</button>\n          <SelectMulti\n            options={basicOptions}\n            placeholder=\"Search\"\n            onChange={onChangeMock}\n            freeInput\n          />\n        </>\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      input.focus()\n      fireEvent.change(input, { target: { value: 'baz' } })\n      expect(screen.getByRole('listbox')).toBeVisible()\n      screen.getByText('A random button').focus()\n\n      expect(onChangeMock).toHaveBeenCalledWith(['baz'])\n      expect(input).toHaveValue('')\n\n      expect(screen.queryByRole('listbox')).not.toBeInTheDocument()\n    })\n\n    test('copy/paste', () => {\n      const onChangeMock = jest.fn()\n      renderWithTheme(\n        <SelectMulti\n          options={basicOptions}\n          values={['FOO', 'BAR']}\n          onChange={onChangeMock}\n          placeholder=\"Search\"\n          freeInput\n        />\n      )\n\n      const input = screen.getByPlaceholderText('Search')\n      const hiddenInput = screen.getByTestId('hidden-input')\n\n      fireEvent.keyDown(input, { key: 'a', metaKey: true })\n      // testing the hidden input value b/c jsdom do clipboard\n      expect(hiddenInput).toHaveDisplayValue(\n        '[{\"label\":\"Foo\",\"value\":\"FOO\"},{\"label\":\"Bar\",\"value\":\"BAR\"}]'\n      )\n\n      firePasteEvent(\n        input,\n        '[{\"label\":\"Baz\",\"value\":\"BAZ\"},{\"label\":\"Qux\",\"value\":\"QUX\"}]'\n      )\n      fireEvent.change(input, {\n        target: {\n          value:\n            '[{\"label\":\"Baz\",\"value\":\"BAZ\"},{\"label\":\"Qux\",\"value\":\"QUX\"}]',\n        },\n      })\n      expect(onChangeMock).toHaveBeenCalledWith(['FOO', 'BAR', 'BAZ', 'QUX'])\n    })\n  })\n})\n"],"mappings":"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"}