{"version":3,"file":"Form.js","names":["React","forwardRef","useContext","createContext","SpaceVertical","FormContext","Form","props","ref","validationMessages","rest","displayName","useFormContext","name","validationMessage","context","vMessage"],"sources":["../../../src/Form/Form.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref, FormEventHandler } from 'react'\nimport React, { forwardRef, useContext, createContext } from 'react'\nimport type { CompatibleHTMLProps } from '@looker/design-tokens'\nimport type { SpaceHelperProps } from '../Layout'\nimport { SpaceVertical } from '../Layout'\nimport type { ValidationMessageProps } from './ValidationMessage'\n\nexport type ValidationMessages = Record<string, ValidationMessageProps>\n\nexport interface FormProps\n  extends SpaceHelperProps,\n    CompatibleHTMLProps<HTMLFormElement> {\n  /**\n   * A record of all validation messages for the form, where the key is the name\n   *  of the validated field and the value holds the information for the corresponding\n   *  message and validation type.\n   */\n  validationMessages?: ValidationMessages\n  onChange?: FormEventHandler<HTMLFormElement>\n  onInput?: FormEventHandler<HTMLFormElement>\n  onSubmit?: FormEventHandler<HTMLFormElement>\n}\n\nexport interface FormContextProps {\n  validationMessages?: ValidationMessages\n}\n\nexport const FormContext = createContext<FormContextProps>({})\n\nexport const Form = forwardRef(\n  (props: FormProps, ref: Ref<HTMLFormElement>) => {\n    const { validationMessages, ...rest } = props\n    return (\n      <FormContext.Provider\n        value={{\n          validationMessages,\n        }}\n      >\n        <SpaceVertical as=\"form\" {...rest} ref={ref} />\n      </FormContext.Provider>\n    )\n  }\n)\n\nForm.displayName = 'Form'\n\nexport interface ChildProp {\n  children?: JSX.Element\n}\n\nexport interface UseFormContextProps {\n  name?: string\n  validationMessage?: ValidationMessageProps\n}\n\nexport function useFormContext({\n  name,\n  validationMessage,\n}: UseFormContextProps) {\n  const context = useContext(FormContext)\n  let vMessage\n  if (context.validationMessages && name) {\n    vMessage = context.validationMessages[name]\n  } else if (validationMessage) {\n    vMessage = validationMessage\n  }\n  return vMessage\n}\n"],"mappings":";;;;AAMA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,UAAU,EAAEC,aAAa,QAAQ,OAAO;AAGpE,SAASC,aAAa,QAAQ,WAAW;AAuBzC,OAAO,MAAMC,WAAW,GAAGF,aAAa,CAAmB,CAAC,CAAC,CAAC;AAE9D,OAAO,MAAMG,IAAI,GAAGL,UAAU,CAC5B,CAACM,KAAgB,EAAEC,GAAyB,KAAK;EAC/C,MAAM;MAAEC;IAA4B,CAAC,GAAGF,KAAK;IAAdG,IAAI,4BAAKH,KAAK;EAC7C,OACE,oBAAC,WAAW,CAAC,QAAQ;IACnB,KAAK,EAAE;MACLE;IACF;EAAE,GAEF,oBAAC,aAAa;IAAC,EAAE,EAAC;EAAM,GAAKC,IAAI;IAAE,GAAG,EAAEF;EAAI,GAAG,CAC1B;AAE3B,CAAC,CACF;AAEDF,IAAI,CAACK,WAAW,GAAG,MAAM;AAWzB,OAAO,SAASC,cAAc,CAAC;EAC7BC,IAAI;EACJC;AACmB,CAAC,EAAE;EACtB,MAAMC,OAAO,GAAGb,UAAU,CAACG,WAAW,CAAC;EACvC,IAAIW,QAAQ;EACZ,IAAID,OAAO,CAACN,kBAAkB,IAAII,IAAI,EAAE;IACtCG,QAAQ,GAAGD,OAAO,CAACN,kBAAkB,CAACI,IAAI,CAAC;EAC7C,CAAC,MAAM,IAAIC,iBAAiB,EAAE;IAC5BE,QAAQ,GAAGF,iBAAiB;EAC9B;EACA,OAAOE,QAAQ;AACjB"}