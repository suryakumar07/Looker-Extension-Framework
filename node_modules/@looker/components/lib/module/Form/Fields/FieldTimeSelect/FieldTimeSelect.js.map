{"version":3,"file":"FieldTimeSelect.js","names":["React","forwardRef","useState","styled","FloatingLabelField","omitFieldProps","pickFieldProps","getHasValue","useFormContext","Tooltip","useID","useTranslation","InputTimeSelect","VisuallyHidden","FieldTimeSelect","props","ref","validationMessage","id","onChange","propsOnChange","fieldProps","formatError","setFormatError","t","value","onBlur","errorMessage","message","type"],"sources":["../../../../../src/Form/Fields/FieldTimeSelect/FieldTimeSelect.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref } from 'react'\nimport React, { forwardRef, useState } from 'react'\nimport styled from 'styled-components'\nimport type { FloatingLabelFieldProps } from '../Field/types'\nimport type { ValidationMessageProps } from '../../ValidationMessage'\nimport { FloatingLabelField, omitFieldProps, pickFieldProps } from '../Field'\nimport { getHasValue } from '../Field/useFloatingLabel'\nimport { useFormContext } from '../../Form'\nimport { Tooltip } from '../../../Tooltip'\nimport { useID, useTranslation } from '../../../utils'\nimport type { InputTimeSelectProps } from '../../Inputs/InputTimeSelect'\nimport { InputTimeSelect } from '../../Inputs/InputTimeSelect'\nimport { VisuallyHidden } from '../../../VisuallyHidden'\n\nexport interface FieldTimeSelectProps\n  extends FloatingLabelFieldProps,\n    InputTimeSelectProps {}\n\nexport const FieldTimeSelect = styled(\n  forwardRef((props: FieldTimeSelectProps, ref: Ref<HTMLInputElement>) => {\n    const validationMessage = useFormContext(props)\n    const id = useID(props.id)\n    const { onChange: propsOnChange, ...fieldProps } = omitFieldProps(props)\n    const [formatError, setFormatError] = useState('')\n    const { t } = useTranslation('FieldTimeSelect')\n    const onChange = (value?: string) => {\n      propsOnChange?.(value)\n      if (value) {\n        setFormatError('')\n      } else {\n        setFormatError(t('Please use format HHMM'))\n      }\n    }\n\n    const onBlur = () => {\n      // Clear the format errors on blur since the combobox will revert back to\n      // the previously selected value or the new value is it is valid\n      setFormatError('')\n    }\n    const errorMessage = (\n      formatError ? { message: formatError, type: 'error' } : validationMessage\n    ) as ValidationMessageProps\n    return (\n      <FloatingLabelField\n        data-testid=\"FieldSelectMultiId\"\n        {...pickFieldProps(props)}\n        id={id}\n        hasValue={getHasValue(props)}\n      >\n        <Tooltip\n          placement=\"top-end\"\n          content={formatError}\n          isOpen={true}\n          canClose={() => false}\n        >\n          <div>\n            <VisuallyHidden aria-live=\"polite\">{formatError}</VisuallyHidden>\n            <InputTimeSelect\n              {...fieldProps}\n              aria-labelledby={`labelledby-${id}`}\n              id={id}\n              validationType={errorMessage?.type}\n              ref={ref}\n              onChange={onChange}\n              onBlur={onBlur}\n            />\n          </div>\n        </Tooltip>\n      </FloatingLabelField>\n    )\n  })\n)``\n"],"mappings":";;;;;;AAMA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,OAAOC,MAAM,MAAM,mBAAmB;AAGtC,SAASC,kBAAkB,EAAEC,cAAc,EAAEC,cAAc,QAAQ,UAAU;AAC7E,SAASC,WAAW,QAAQ,2BAA2B;AACvD,SAASC,cAAc,QAAQ,YAAY;AAC3C,SAASC,OAAO,QAAQ,kBAAkB;AAC1C,SAASC,KAAK,EAAEC,cAAc,QAAQ,gBAAgB;AAEtD,SAASC,eAAe,QAAQ,8BAA8B;AAC9D,SAASC,cAAc,QAAQ,yBAAyB;AAMxD,OAAO,MAAMC,eAAe,GAAGX,MAAM,CACnCF,UAAU,CAAC,CAACc,KAA2B,EAAEC,GAA0B,KAAK;EACtE,MAAMC,iBAAiB,GAAGT,cAAc,CAACO,KAAK,CAAC;EAC/C,MAAMG,EAAE,GAAGR,KAAK,CAACK,KAAK,CAACG,EAAE,CAAC;EAC1B,wBAAmDb,cAAc,CAACU,KAAK,CAAC;IAAlE;MAAEI,QAAQ,EAAEC;IAA6B,CAAC;IAAZC,UAAU;EAC9C,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EAClD,MAAM;IAAEsB;EAAE,CAAC,GAAGb,cAAc,CAAC,iBAAiB,CAAC;EAC/C,MAAMQ,QAAQ,GAAIM,KAAc,IAAK;IACnCL,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAGK,KAAK,CAAC;IACtB,IAAIA,KAAK,EAAE;MACTF,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,MAAM;MACLA,cAAc,CAACC,CAAC,CAAC,wBAAwB,CAAC,CAAC;IAC7C;EACF,CAAC;EAED,MAAME,MAAM,GAAG,MAAM;IAGnBH,cAAc,CAAC,EAAE,CAAC;EACpB,CAAC;EACD,MAAMI,YAAY,GAChBL,WAAW,GAAG;IAAEM,OAAO,EAAEN,WAAW;IAAEO,IAAI,EAAE;EAAQ,CAAC,GAAGZ,iBAC/B;EAC3B,OACE,oBAAC,kBAAkB;IACjB,eAAY;EAAoB,GAC5BX,cAAc,CAACS,KAAK,CAAC;IACzB,EAAE,EAAEG,EAAG;IACP,QAAQ,EAAEX,WAAW,CAACQ,KAAK;EAAE,IAE7B,oBAAC,OAAO;IACN,SAAS,EAAC,SAAS;IACnB,OAAO,EAAEO,WAAY;IACrB,MAAM,EAAE,IAAK;IACb,QAAQ,EAAE,MAAM;EAAM,GAEtB,iCACE,oBAAC,cAAc;IAAC,aAAU;EAAQ,GAAEA,WAAW,CAAkB,EACjE,oBAAC,eAAe,eACVD,UAAU;IACd,mBAAkB,cAAaH,EAAG,EAAE;IACpC,EAAE,EAAEA,EAAG;IACP,cAAc,EAAES,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEE,IAAK;IACnC,GAAG,EAAEb,GAAI;IACT,QAAQ,EAAEG,QAAS;IACnB,MAAM,EAAEO;EAAO,GACf,CACE,CACE,CACS;AAEzB,CAAC,CAAC,CACH;EAAA;EAAA;AAAA,gBAAC,IAAC"}