{"version":3,"file":"CopyToClipboard.spec.js","names":["act","fireEvent","screen","React","renderWithTheme","Button","CopyToClipboard","CopyToClipboardComponent","content","describe","beforeAll","Object","defineProperty","document","value","jest","fn","it","expect","getByText","toBeVisible","copyButton","click","useFakeTimers","button","runOnlyPendingTimers","useRealTimers","spyOn","execCommand","toHaveBeenCalledWith"],"sources":["../../../src/CopyToClipboard/CopyToClipboard.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { act, fireEvent, screen } from '@testing-library/react'\nimport React from 'react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport { Button } from '../Button'\nimport { CopyToClipboard } from './CopyToClipboard'\n\nconst CopyToClipboardComponent = () => {\n  const content = 'here is some text to be copied'\n  return <CopyToClipboard content={content} />\n}\n\ndescribe('CopyToClipboard', () => {\n  beforeAll(() => {\n    Object.defineProperty(document, 'execCommand', { value: jest.fn() })\n  })\n\n  it('renders the CopyToClipboard', () => {\n    renderWithTheme(<CopyToClipboardComponent />)\n    expect(screen.getByText('Copy to Clipboard')).toBeVisible()\n  })\n\n  it('renders the CopyToClipboard with different string values as children and success', () => {\n    const content = 'here is some text to be copied'\n    renderWithTheme(\n      <CopyToClipboard content={content} success=\"it was copied\">\n        copy something\n      </CopyToClipboard>\n    )\n    const copyButton = screen.getByText('copy something')\n    expect(copyButton).toBeVisible()\n    fireEvent.click(copyButton)\n    expect(screen.getByText('it was copied')).toBeVisible()\n  })\n\n  it('renders the CopyToClipboard with different components as children and success', () => {\n    const content = 'here is some text to be copied'\n    renderWithTheme(\n      <CopyToClipboard content={content} success={<Button>Success</Button>}>\n        <Button>Copy stuff</Button>\n      </CopyToClipboard>\n    )\n    const copyButton = screen.getByText('Copy stuff')\n    expect(copyButton).toBeVisible()\n    fireEvent.click(copyButton)\n    expect(screen.getByText('Success')).toBeVisible()\n  })\n\n  it('transitions from copy to copied state and back when clicked', async () => {\n    jest.useFakeTimers()\n    renderWithTheme(<CopyToClipboardComponent />)\n    const button = screen.getByText('Copy to Clipboard')\n    fireEvent.click(button)\n    expect(screen.getByText('Copied')).toBeVisible()\n    act(() => {\n      jest.runOnlyPendingTimers()\n    })\n    expect(screen.getByText('Copy to Clipboard')).toBeVisible()\n    jest.useRealTimers()\n  })\n\n  it('copies the refs textarea content on copy click', () => {\n    jest.spyOn(document, 'execCommand')\n    renderWithTheme(<CopyToClipboardComponent />)\n    const button = screen.getByText('Copy to Clipboard')\n    fireEvent.click(button)\n    expect(document.execCommand).toHaveBeenCalledWith('copy')\n  })\n})\n"],"mappings":";;AAKA,SAASA,GAAG,EAAEC,SAAS,EAAEC,MAAM,QAAQ,wBAAwB;AAC/D,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,QAAQ,+BAA+B;AAC/D,SAASC,MAAM,QAAQ,WAAW;AAClC,SAASC,eAAe,QAAQ,mBAAmB;AAEnD,MAAMC,wBAAwB,GAAG,MAAM;EACrC,MAAMC,OAAO,GAAG,gCAAgC;EAChD,OAAO,oBAAC,eAAe;IAAC,OAAO,EAAEA;EAAQ,EAAG;AAC9C,CAAC;AAEDC,QAAQ,CAAC,iBAAiB,EAAE,MAAM;EAChCC,SAAS,CAAC,MAAM;IACdC,MAAM,CAACC,cAAc,CAACC,QAAQ,EAAE,aAAa,EAAE;MAAEC,KAAK,EAAEC,IAAI,CAACC,EAAE;IAAG,CAAC,CAAC;EACtE,CAAC,CAAC;EAEFC,EAAE,CAAC,6BAA6B,EAAE,MAAM;IACtCb,eAAe,CAAC,oBAAC,wBAAwB,OAAG,CAAC;IAC7Cc,MAAM,CAAChB,MAAM,CAACiB,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAACC,WAAW,EAAE;EAC7D,CAAC,CAAC;EAEFH,EAAE,CAAC,kFAAkF,EAAE,MAAM;IAC3F,MAAMT,OAAO,GAAG,gCAAgC;IAChDJ,eAAe,CACb,oBAAC,eAAe;MAAC,OAAO,EAAEI,OAAQ;MAAC,OAAO,EAAC;IAAe,oBAExC,CACnB;IACD,MAAMa,UAAU,GAAGnB,MAAM,CAACiB,SAAS,CAAC,gBAAgB,CAAC;IACrDD,MAAM,CAACG,UAAU,CAAC,CAACD,WAAW,EAAE;IAChCnB,SAAS,CAACqB,KAAK,CAACD,UAAU,CAAC;IAC3BH,MAAM,CAAChB,MAAM,CAACiB,SAAS,CAAC,eAAe,CAAC,CAAC,CAACC,WAAW,EAAE;EACzD,CAAC,CAAC;EAEFH,EAAE,CAAC,+EAA+E,EAAE,MAAM;IACxF,MAAMT,OAAO,GAAG,gCAAgC;IAChDJ,eAAe,CACb,oBAAC,eAAe;MAAC,OAAO,EAAEI,OAAQ;MAAC,OAAO,EAAE,oBAAC,MAAM;IAAkB,GACnE,oBAAC,MAAM,qBAAoB,CACX,CACnB;IACD,MAAMa,UAAU,GAAGnB,MAAM,CAACiB,SAAS,CAAC,YAAY,CAAC;IACjDD,MAAM,CAACG,UAAU,CAAC,CAACD,WAAW,EAAE;IAChCnB,SAAS,CAACqB,KAAK,CAACD,UAAU,CAAC;IAC3BH,MAAM,CAAChB,MAAM,CAACiB,SAAS,CAAC,SAAS,CAAC,CAAC,CAACC,WAAW,EAAE;EACnD,CAAC,CAAC;EAEFH,EAAE,CAAC,6DAA6D,EAAE,YAAY;IAC5EF,IAAI,CAACQ,aAAa,EAAE;IACpBnB,eAAe,CAAC,oBAAC,wBAAwB,OAAG,CAAC;IAC7C,MAAMoB,MAAM,GAAGtB,MAAM,CAACiB,SAAS,CAAC,mBAAmB,CAAC;IACpDlB,SAAS,CAACqB,KAAK,CAACE,MAAM,CAAC;IACvBN,MAAM,CAAChB,MAAM,CAACiB,SAAS,CAAC,QAAQ,CAAC,CAAC,CAACC,WAAW,EAAE;IAChDpB,GAAG,CAAC,MAAM;MACRe,IAAI,CAACU,oBAAoB,EAAE;IAC7B,CAAC,CAAC;IACFP,MAAM,CAAChB,MAAM,CAACiB,SAAS,CAAC,mBAAmB,CAAC,CAAC,CAACC,WAAW,EAAE;IAC3DL,IAAI,CAACW,aAAa,EAAE;EACtB,CAAC,CAAC;EAEFT,EAAE,CAAC,gDAAgD,EAAE,MAAM;IACzDF,IAAI,CAACY,KAAK,CAACd,QAAQ,EAAE,aAAa,CAAC;IACnCT,eAAe,CAAC,oBAAC,wBAAwB,OAAG,CAAC;IAC7C,MAAMoB,MAAM,GAAGtB,MAAM,CAACiB,SAAS,CAAC,mBAAmB,CAAC;IACpDlB,SAAS,CAACqB,KAAK,CAACE,MAAM,CAAC;IACvBN,MAAM,CAACL,QAAQ,CAACe,WAAW,CAAC,CAACC,oBAAoB,CAAC,MAAM,CAAC;EAC3D,CAAC,CAAC;AACJ,CAAC,CAAC"}