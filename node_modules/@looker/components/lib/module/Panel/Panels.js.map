{"version":3,"file":"Panels.js","names":["TrapStackProvider","React","createContext","styled","PanelsContext","displayName","activatePanel","element","panel","closest","container","style","visibility","Panels","props"],"sources":["../../../src/Panel/Panels.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { TrapStackContextProps, Trap } from '@looker/components-providers'\nimport { TrapStackProvider } from '@looker/components-providers'\nimport type { CompatibleHTMLProps } from '@looker/design-tokens'\nimport React, { createContext } from 'react'\nimport styled from 'styled-components'\n\nexport const PanelsContext = createContext<TrapStackContextProps>({})\nPanelsContext.displayName = 'PanelsContext'\n\nconst activatePanel = ({ element }: Trap) => {\n  // The element is a hidden div inside the panel\n  // NOTE: data-panel & data-panels are used as a quick way to find these elemens\n  // in the absence of an appropriate aria role\n  const panel = element.closest<HTMLDivElement>('[data-panel]')\n  const container = element.closest<HTMLDivElement>('[data-panels]')\n  if (panel && container) {\n    // The active Panel covers all other content in Panels\n    // Adding visibility: hidden to Panels avoids moving focus\n    // to any hidden content via keyboard nav\n    container.style.visibility = 'hidden'\n    // Override visibility only in the active Panel\n    panel.style.visibility = 'visible'\n  }\n\n  // Deactivation, remove visibility styles\n  return () => {\n    if (panel && container) {\n      panel.style.visibility = ''\n      container.style.visibility = ''\n    }\n  }\n}\n\nexport type PanelsProps = CompatibleHTMLProps<HTMLDivElement>\n\nexport const Panels = styled((props: PanelsProps) => {\n  // TrapStackProvider calculates the topmost active Panel and activates\n  // the visibility styles accordingly\n  return (\n    <TrapStackProvider activate={activatePanel} context={PanelsContext}>\n      <div {...props} data-panels />\n    </TrapStackProvider>\n  )\n})`\n  height: 100%;\n  position: relative;\n  width: 100%;\n`\n"],"mappings":";;;;AAMA,SAASA,iBAAiB,QAAQ,8BAA8B;AAEhE,OAAOC,KAAK,IAAIC,aAAa,QAAQ,OAAO;AAC5C,OAAOC,MAAM,MAAM,mBAAmB;AAEtC,OAAO,MAAMC,aAAa,GAAGF,aAAa,CAAwB,CAAC,CAAC,CAAC;AACrEE,aAAa,CAACC,WAAW,GAAG,eAAe;AAE3C,MAAMC,aAAa,GAAG,CAAC;EAAEC;AAAc,CAAC,KAAK;EAI3C,MAAMC,KAAK,GAAGD,OAAO,CAACE,OAAO,CAAiB,cAAc,CAAC;EAC7D,MAAMC,SAAS,GAAGH,OAAO,CAACE,OAAO,CAAiB,eAAe,CAAC;EAClE,IAAID,KAAK,IAAIE,SAAS,EAAE;IAItBA,SAAS,CAACC,KAAK,CAACC,UAAU,GAAG,QAAQ;IAErCJ,KAAK,CAACG,KAAK,CAACC,UAAU,GAAG,SAAS;EACpC;;EAGA,OAAO,MAAM;IACX,IAAIJ,KAAK,IAAIE,SAAS,EAAE;MACtBF,KAAK,CAACG,KAAK,CAACC,UAAU,GAAG,EAAE;MAC3BF,SAAS,CAACC,KAAK,CAACC,UAAU,GAAG,EAAE;IACjC;EACF,CAAC;AACH,CAAC;AAID,OAAO,MAAMC,MAAM,GAAGV,MAAM,CAAEW,KAAkB,IAAK;EAGnD,OACE,oBAAC,iBAAiB;IAAC,QAAQ,EAAER,aAAc;IAAC,OAAO,EAAEF;EAAc,GACjE,wCAASU,KAAK;IAAE;EAAW,GAAG,CACZ;AAExB,CAAC,CAAC;EAAA;EAAA;AAAA,gBAAC;AACH;AACA;AACA;AACA,GAAC"}