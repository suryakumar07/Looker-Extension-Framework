{"version":3,"file":"WindowedTreeNode.js","names":["React","cloneElement","createContext","isValidElement","useCallback","useContext","TreeCollectionContext","WindowedTreeContext","partialRender","WindowedTreeNode","content","firstIDinWindow","id","items","context","toggleNode","isOpen","props","children","map","item","toggleStateMap","density"],"sources":["../../../src/Tree/WindowedTreeNode.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { DensityProp } from '@looker/design-tokens'\nimport React, {\n  cloneElement,\n  createContext,\n  isValidElement,\n  useCallback,\n  useContext,\n} from 'react'\nimport { TreeCollectionContext } from './TreeCollectionContext'\nimport type { WindowedTreeNodeIDProps } from './types'\n\nexport type WindowedTreeContextProps = DensityProp & {\n  isOpen?: boolean\n  partialRender: boolean\n  toggleNode?: (isOpen: boolean) => void\n}\n\nexport const WindowedTreeContext = createContext<WindowedTreeContextProps>({\n  partialRender: false,\n})\n\nexport const WindowedTreeNode = ({\n  content,\n  firstIDinWindow,\n  id,\n  items,\n}: WindowedTreeNodeIDProps & {\n  firstIDinWindow?: number\n}) => {\n  // Update state for which tree nodes are opened / closed\n  const context = useContext(TreeCollectionContext)\n  const toggleNode = useCallback(\n    (isOpen: boolean) => {\n      context.toggleNode?.(id, isOpen)\n    },\n    [context, id]\n  )\n\n  if (items && isValidElement(content)) {\n    // insert the items as children\n    const props = {\n      children: items.map(item => (\n        <WindowedTreeNode\n          firstIDinWindow={firstIDinWindow}\n          {...item}\n          key={item.id}\n        />\n      )),\n    }\n    const isOpen = context.toggleStateMap?.[id]?.isOpen\n\n    return (\n      <WindowedTreeContext.Provider\n        value={{\n          density: context.density,\n          isOpen,\n          partialRender: firstIDinWindow ? id < firstIDinWindow : false,\n          toggleNode,\n        }}\n      >\n        {cloneElement(content, props)}\n      </WindowedTreeContext.Provider>\n    )\n  }\n  return content\n}\n"],"mappings":";;AAMA,OAAOA,KAAK,IACVC,YAAY,EACZC,aAAa,EACbC,cAAc,EACdC,WAAW,EACXC,UAAU,QACL,OAAO;AACd,SAASC,qBAAqB,QAAQ,yBAAyB;AAS/D,OAAO,MAAMC,mBAAmB,GAAGL,aAAa,CAA2B;EACzEM,aAAa,EAAE;AACjB,CAAC,CAAC;AAEF,OAAO,MAAMC,gBAAgB,GAAG,CAAC;EAC/BC,OAAO;EACPC,eAAe;EACfC,EAAE;EACFC;AAGF,CAAC,KAAK;EAEJ,MAAMC,OAAO,GAAGT,UAAU,CAACC,qBAAqB,CAAC;EACjD,MAAMS,UAAU,GAAGX,WAAW,CAC3BY,MAAe,IAAK;IAAA;IACnB,uBAAAF,OAAO,CAACC,UAAU,wDAAlB,yBAAAD,OAAO,EAAcF,EAAE,EAAEI,MAAM,CAAC;EAClC,CAAC,EACD,CAACF,OAAO,EAAEF,EAAE,CAAC,CACd;EAED,IAAIC,KAAK,IAAIV,cAAc,CAACO,OAAO,CAAC,EAAE;IAAA;IAEpC,MAAMO,KAAK,GAAG;MACZC,QAAQ,EAAEL,KAAK,CAACM,GAAG,CAACC,IAAI,IACtB,oBAAC,gBAAgB;QACf,eAAe,EAAET;MAAgB,GAC7BS,IAAI;QACR,GAAG,EAAEA,IAAI,CAACR;MAAG,GAEhB;IACH,CAAC;IACD,MAAMI,MAAM,4BAAGF,OAAO,CAACO,cAAc,oFAAtB,sBAAyBT,EAAE,CAAC,2DAA5B,uBAA8BI,MAAM;IAEnD,OACE,oBAAC,mBAAmB,CAAC,QAAQ;MAC3B,KAAK,EAAE;QACLM,OAAO,EAAER,OAAO,CAACQ,OAAO;QACxBN,MAAM;QACNR,aAAa,EAAEG,eAAe,GAAGC,EAAE,GAAGD,eAAe,GAAG,KAAK;QAC7DI;MACF;IAAE,GAEDd,YAAY,CAACS,OAAO,EAAEO,KAAK,CAAC,CACA;EAEnC;EACA,OAAOP,OAAO;AAChB,CAAC"}