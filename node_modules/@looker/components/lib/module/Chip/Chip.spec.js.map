{"version":3,"file":"Chip.spec.js","names":["renderWithTheme","React","fireEvent","screen","waitForElementToBeRemoved","Chip","jest","mock","isOverflowing","describe","test","expect","getByText","toBeInTheDocument","queryByRole","not","toHaveStyleRule","onDeleteTrigger","fn","click","getByRole","toHaveBeenCalledTimes","chip","getByTestId","keyDown","key","mouseOver","toHaveTextContent","mouseOut"],"sources":["../../../src/Chip/Chip.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport React from 'react'\nimport {\n  fireEvent,\n  screen,\n  waitForElementToBeRemoved,\n} from '@testing-library/react'\nimport { Chip } from './Chip'\n\n// For testing the truncation logic\njest.mock('../utils/isOverflowing', () => ({\n  isOverflowing: () => true,\n}))\n\ndescribe('Chip', () => {\n  test('default', () => {\n    renderWithTheme(<Chip>chip</Chip>)\n    expect(screen.getByText('chip')).toBeInTheDocument()\n  })\n\n  test('disabled', () => {\n    renderWithTheme(<Chip disabled>chip</Chip>)\n    /* Disabled chips have no remove button */\n    expect(screen.queryByRole('button')).not.toBeInTheDocument()\n  })\n\n  test('Chip accepts a prefix and renders it with correct style', () => {\n    renderWithTheme(<Chip prefix=\"role\">admin</Chip>)\n    expect(screen.getByText(/\\brole\\b/)).toHaveStyleRule('font-weight: 400')\n  })\n\n  test('onDelete works correctly', () => {\n    const onDeleteTrigger = jest.fn()\n\n    renderWithTheme(\n      <Chip onDelete={onDeleteTrigger} data-testid=\"chip\">\n        clickable\n      </Chip>\n    )\n\n    fireEvent.click(screen.getByRole('button'))\n    expect(onDeleteTrigger).toHaveBeenCalledTimes(1)\n\n    const chip = screen.getByTestId('chip')\n\n    fireEvent.keyDown(chip, {\n      key: 'Backspace',\n    })\n    expect(onDeleteTrigger).toHaveBeenCalledTimes(2)\n  })\n\n  test('truncation', async () => {\n    // Label length doesn't matter since we're mocking isOverflowing\n    renderWithTheme(<Chip>truncate me</Chip>)\n    const chip = screen.getByText('truncate me')\n    fireEvent.mouseOver(chip)\n\n    expect(screen.getByRole('tooltip')).toHaveTextContent('truncate me')\n\n    fireEvent.mouseOut(chip)\n    await waitForElementToBeRemoved(() => screen.queryByRole('tooltip'))\n  })\n})\n"],"mappings":";AAIA,SAASA,eAAe,QAAQ,+BAA+B;AAC/D,OAAOC,KAAK,MAAM,OAAO;AACzB,SACEC,SAAS,EACTC,MAAM,EACNC,yBAAyB,QACpB,wBAAwB;AAC/B,SAASC,IAAI,QAAQ,QAAQ;;AAG7BC,IAAI,CAACC,IAAI,CAAC,wBAAwB,EAAE,OAAO;EACzCC,aAAa,EAAE,MAAM;AACvB,CAAC,CAAC,CAAC;AAEHC,QAAQ,CAAC,MAAM,EAAE,MAAM;EACrBC,IAAI,CAAC,SAAS,EAAE,MAAM;IACpBV,eAAe,CAAC,oBAAC,IAAI,eAAY,CAAC;IAClCW,MAAM,CAACR,MAAM,CAACS,SAAS,CAAC,MAAM,CAAC,CAAC,CAACC,iBAAiB,EAAE;EACtD,CAAC,CAAC;EAEFH,IAAI,CAAC,UAAU,EAAE,MAAM;IACrBV,eAAe,CAAC,oBAAC,IAAI;MAAC,QAAQ;IAAA,UAAY,CAAC;IAE3CW,MAAM,CAACR,MAAM,CAACW,WAAW,CAAC,QAAQ,CAAC,CAAC,CAACC,GAAG,CAACF,iBAAiB,EAAE;EAC9D,CAAC,CAAC;EAEFH,IAAI,CAAC,yDAAyD,EAAE,MAAM;IACpEV,eAAe,CAAC,oBAAC,IAAI;MAAC,MAAM,EAAC;IAAM,WAAa,CAAC;IACjDW,MAAM,CAACR,MAAM,CAACS,SAAS,CAAC,UAAU,CAAC,CAAC,CAACI,eAAe,CAAC,kBAAkB,CAAC;EAC1E,CAAC,CAAC;EAEFN,IAAI,CAAC,0BAA0B,EAAE,MAAM;IACrC,MAAMO,eAAe,GAAGX,IAAI,CAACY,EAAE,EAAE;IAEjClB,eAAe,CACb,oBAAC,IAAI;MAAC,QAAQ,EAAEiB,eAAgB;MAAC,eAAY;IAAM,eAE5C,CACR;IAEDf,SAAS,CAACiB,KAAK,CAAChB,MAAM,CAACiB,SAAS,CAAC,QAAQ,CAAC,CAAC;IAC3CT,MAAM,CAACM,eAAe,CAAC,CAACI,qBAAqB,CAAC,CAAC,CAAC;IAEhD,MAAMC,IAAI,GAAGnB,MAAM,CAACoB,WAAW,CAAC,MAAM,CAAC;IAEvCrB,SAAS,CAACsB,OAAO,CAACF,IAAI,EAAE;MACtBG,GAAG,EAAE;IACP,CAAC,CAAC;IACFd,MAAM,CAACM,eAAe,CAAC,CAACI,qBAAqB,CAAC,CAAC,CAAC;EAClD,CAAC,CAAC;EAEFX,IAAI,CAAC,YAAY,EAAE,YAAY;IAE7BV,eAAe,CAAC,oBAAC,IAAI,sBAAmB,CAAC;IACzC,MAAMsB,IAAI,GAAGnB,MAAM,CAACS,SAAS,CAAC,aAAa,CAAC;IAC5CV,SAAS,CAACwB,SAAS,CAACJ,IAAI,CAAC;IAEzBX,MAAM,CAACR,MAAM,CAACiB,SAAS,CAAC,SAAS,CAAC,CAAC,CAACO,iBAAiB,CAAC,aAAa,CAAC;IAEpEzB,SAAS,CAAC0B,QAAQ,CAACN,IAAI,CAAC;IACxB,MAAMlB,yBAAyB,CAAC,MAAMD,MAAM,CAACW,WAAW,CAAC,SAAS,CAAC,CAAC;EACtE,CAAC,CAAC;AACJ,CAAC,CAAC"}