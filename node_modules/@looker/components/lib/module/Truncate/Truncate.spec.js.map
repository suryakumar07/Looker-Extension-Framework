{"version":3,"file":"Truncate.spec.js","names":["React","renderWithTheme","fireEvent","screen","waitFor","waitForElementToBeRemoved","Box2","isOverflowing","Truncate","jest","mock","fn","longLabel","describe","test","mockImplementation","trigger","getByText","mouseOver","tooltip","queryByRole","expect","not","toBeInTheDocument","getAllByText","toBeVisible","mouseOut"],"sources":["../../../src/Truncate/Truncate.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport {\n  fireEvent,\n  screen,\n  waitFor,\n  waitForElementToBeRemoved,\n} from '@testing-library/react'\nimport { Box2 } from '../Layout/Box2'\nimport { isOverflowing } from '../utils'\nimport { Truncate } from './Truncate'\n\n/**\n * JSDom doesn't replicate browser enough to trigger a measurable overflow\n * event.\n *\n * Mocking isOverflowing for now till we to figure out a clever way to\n * trigger overflow so test can prove the tooltip is enabled in overflow scenario\n */\njest.mock('../utils/isOverflowing', () => ({\n  isOverflowing: jest.fn(),\n}))\n\nconst longLabel = 'This is a long label that should trigger truncation'\n\ndescribe('Truncate', () => {\n  test('Basic', async () => {\n    // False means text is not overflowing\n    ;(isOverflowing as jest.Mock).mockImplementation(() => false)\n    renderWithTheme(<Truncate>Hello world</Truncate>)\n    const trigger = screen.getByText('Hello world')\n    fireEvent.mouseOver(trigger)\n\n    const tooltip = screen.queryByRole('tooltip')\n    expect(tooltip).not.toBeInTheDocument()\n  })\n\n  test('Truncate active', async () => {\n    ;(isOverflowing as jest.Mock).mockImplementation(() => true)\n    renderWithTheme(\n      <Box2 width=\"5rem\">\n        <Truncate>{longLabel}</Truncate>\n      </Box2>\n    )\n\n    const trigger = screen.getAllByText(longLabel)[0]\n    fireEvent.mouseOver(trigger)\n\n    const tooltip = screen.getAllByText(longLabel)[1]\n    await waitFor(() => expect(tooltip).toBeVisible())\n\n    fireEvent.mouseOut(tooltip)\n    await waitForElementToBeRemoved(() => screen.queryByRole('tooltip'))\n  })\n\n  test('Truncate detail', async () => {\n    ;(isOverflowing as jest.Mock).mockImplementation(() => true)\n    renderWithTheme(\n      <Truncate description=\"description text\">Hello World</Truncate>\n    )\n\n    const trigger = screen.getByText('Hello World')\n    fireEvent.mouseOver(trigger)\n\n    const tooltip = screen.getByText('description text')\n    await waitFor(() => expect(tooltip).toBeVisible())\n\n    fireEvent.mouseOut(tooltip)\n    await waitForElementToBeRemoved(() => screen.queryByRole('tooltip'))\n  })\n})\n"],"mappings":";;AAKA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,eAAe,QAAQ,+BAA+B;AAC/D,SACEC,SAAS,EACTC,MAAM,EACNC,OAAO,EACPC,yBAAyB,QACpB,wBAAwB;AAC/B,SAASC,IAAI,QAAQ,gBAAgB;AACrC,SAASC,aAAa,QAAQ,UAAU;AACxC,SAASC,QAAQ,QAAQ,YAAY;;AASrCC,IAAI,CAACC,IAAI,CAAC,wBAAwB,EAAE,OAAO;EACzCH,aAAa,EAAEE,IAAI,CAACE,EAAE;AACxB,CAAC,CAAC,CAAC;AAEH,MAAMC,SAAS,GAAG,qDAAqD;AAEvEC,QAAQ,CAAC,UAAU,EAAE,MAAM;EACzBC,IAAI,CAAC,OAAO,EAAE,YAAY;IAExB;IAAEP,aAAa,CAAeQ,kBAAkB,CAAC,MAAM,KAAK,CAAC;IAC7Dd,eAAe,CAAC,oBAAC,QAAQ,sBAAuB,CAAC;IACjD,MAAMe,OAAO,GAAGb,MAAM,CAACc,SAAS,CAAC,aAAa,CAAC;IAC/Cf,SAAS,CAACgB,SAAS,CAACF,OAAO,CAAC;IAE5B,MAAMG,OAAO,GAAGhB,MAAM,CAACiB,WAAW,CAAC,SAAS,CAAC;IAC7CC,MAAM,CAACF,OAAO,CAAC,CAACG,GAAG,CAACC,iBAAiB,EAAE;EACzC,CAAC,CAAC;EAEFT,IAAI,CAAC,iBAAiB,EAAE,YAAY;IAClC;IAAEP,aAAa,CAAeQ,kBAAkB,CAAC,MAAM,IAAI,CAAC;IAC5Dd,eAAe,CACb,oBAAC,IAAI;MAAC,KAAK,EAAC;IAAM,GAChB,oBAAC,QAAQ,QAAEW,SAAS,CAAY,CAC3B,CACR;IAED,MAAMI,OAAO,GAAGb,MAAM,CAACqB,YAAY,CAACZ,SAAS,CAAC,CAAC,CAAC,CAAC;IACjDV,SAAS,CAACgB,SAAS,CAACF,OAAO,CAAC;IAE5B,MAAMG,OAAO,GAAGhB,MAAM,CAACqB,YAAY,CAACZ,SAAS,CAAC,CAAC,CAAC,CAAC;IACjD,MAAMR,OAAO,CAAC,MAAMiB,MAAM,CAACF,OAAO,CAAC,CAACM,WAAW,EAAE,CAAC;IAElDvB,SAAS,CAACwB,QAAQ,CAACP,OAAO,CAAC;IAC3B,MAAMd,yBAAyB,CAAC,MAAMF,MAAM,CAACiB,WAAW,CAAC,SAAS,CAAC,CAAC;EACtE,CAAC,CAAC;EAEFN,IAAI,CAAC,iBAAiB,EAAE,YAAY;IAClC;IAAEP,aAAa,CAAeQ,kBAAkB,CAAC,MAAM,IAAI,CAAC;IAC5Dd,eAAe,CACb,oBAAC,QAAQ;MAAC,WAAW,EAAC;IAAkB,iBAAuB,CAChE;IAED,MAAMe,OAAO,GAAGb,MAAM,CAACc,SAAS,CAAC,aAAa,CAAC;IAC/Cf,SAAS,CAACgB,SAAS,CAACF,OAAO,CAAC;IAE5B,MAAMG,OAAO,GAAGhB,MAAM,CAACc,SAAS,CAAC,kBAAkB,CAAC;IACpD,MAAMb,OAAO,CAAC,MAAMiB,MAAM,CAACF,OAAO,CAAC,CAACM,WAAW,EAAE,CAAC;IAElDvB,SAAS,CAACwB,QAAQ,CAACP,OAAO,CAAC;IAC3B,MAAMd,yBAAyB,CAAC,MAAMF,MAAM,CAACiB,WAAW,CAAC,SAAS,CAAC,CAAC;EACtE,CAAC,CAAC;AACJ,CAAC,CAAC"}