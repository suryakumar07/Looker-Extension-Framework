{"version":3,"file":"Menu.js","names":["React","cloneElement","forwardRef","Popover","popoverPropKeys","useID","MenuList","partitionMenuProps","props","allProps","popoverProps","forEach","key","undefined","listProps","Menu","ref","children","content","id","propsID","listRef","restProps","list"],"sources":["../../../src/Menu/Menu.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref, ReactElement } from 'react'\nimport React, { cloneElement, forwardRef } from 'react'\nimport type { ListProps } from '../List'\nimport type { PopoverProps, UsePopoverResponseDom } from '../Popover'\nimport { Popover, popoverPropKeys } from '../Popover'\nimport { useID } from '../utils'\nimport { MenuList } from './MenuList'\n\nexport interface MenuDomProps extends UsePopoverResponseDom {\n  'aria-controls': string\n}\n\nexport interface MenuProps\n  extends Omit<PopoverProps, 'children'>,\n    Omit<ListProps, 'children' | 'content'> {\n  /**\n   * A ReactElement that accepts dom props\n   */\n  children: ReactElement<MenuDomProps>\n  /**\n   * The ref to be passed to the list element (`ref` is passed to the triggering element)\n   */\n  listRef?: Ref<HTMLUListElement>\n}\ntype PartitionProps = Omit<MenuProps, 'children' | 'content' | 'id' | 'listRef'>\ntype KeyOfPartitionProps = keyof PartitionProps\n\n// Returns two object, the first being Popover props and the second being List props\nconst partitionMenuProps = (\n  props: PartitionProps,\n  popoverPropKeys: Array<keyof PopoverProps>\n) => {\n  const allProps = { ...props }\n  const popoverProps: Record<string, unknown> = {}\n\n  popoverPropKeys.forEach(key => {\n    if (props[key as KeyOfPartitionProps] !== undefined) {\n      popoverProps[key] = props[key as KeyOfPartitionProps]\n    }\n    delete allProps[key as KeyOfPartitionProps]\n  })\n\n  const listProps = allProps\n\n  return [popoverProps, listProps]\n}\n\nexport const Menu = forwardRef(\n  (\n    { children, content, id: propsID, listRef, ...restProps }: MenuProps,\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    ref: Ref<any>\n  ) => {\n    const [popoverProps, listProps] = partitionMenuProps(\n      restProps,\n      popoverPropKeys\n    )\n\n    const id = useID(propsID)\n    const list = content && (\n      <MenuList id={id} {...listProps} ref={listRef} data-autofocus=\"true\">\n        {content}\n      </MenuList>\n    )\n    children = cloneElement(children, { 'aria-controls': id })\n\n    return (\n      <Popover content={list} ref={ref} {...popoverProps}>\n        {children}\n      </Popover>\n    )\n  }\n)\n"],"mappings":";;;;;;;AAMA,OAAOA,KAAK,IAAIC,YAAY,EAAEC,UAAU,QAAQ,OAAO;AAGvD,SAASC,OAAO,EAAEC,eAAe,QAAQ,YAAY;AACrD,SAASC,KAAK,QAAQ,UAAU;AAChC,SAASC,QAAQ,QAAQ,YAAY;AAsBrC,MAAMC,kBAAkB,GAAG,CACzBC,KAAqB,EACrBJ,eAA0C,KACvC;EACH,MAAMK,QAAQ,qBAAQD,KAAK,CAAE;EAC7B,MAAME,YAAqC,GAAG,CAAC,CAAC;EAEhDN,eAAe,CAACO,OAAO,CAACC,GAAG,IAAI;IAC7B,IAAIJ,KAAK,CAACI,GAAG,CAAwB,KAAKC,SAAS,EAAE;MACnDH,YAAY,CAACE,GAAG,CAAC,GAAGJ,KAAK,CAACI,GAAG,CAAwB;IACvD;IACA,OAAOH,QAAQ,CAACG,GAAG,CAAwB;EAC7C,CAAC,CAAC;EAEF,MAAME,SAAS,GAAGL,QAAQ;EAE1B,OAAO,CAACC,YAAY,EAAEI,SAAS,CAAC;AAClC,CAAC;AAED,OAAO,MAAMC,IAAI,GAAGb,UAAU,CAC5B,OAGEc,GAAa,KACV;EAAA,IAHH;MAAEC,QAAQ;MAAEC,OAAO;MAAEC,EAAE,EAAEC,OAAO;MAAEC;IAAiC,CAAC;IAAtBC,SAAS;EAIvD,MAAM,CAACZ,YAAY,EAAEI,SAAS,CAAC,GAAGP,kBAAkB,CAClDe,SAAS,EACTlB,eAAe,CAChB;EAED,MAAMe,EAAE,GAAGd,KAAK,CAACe,OAAO,CAAC;EACzB,MAAMG,IAAI,GAAGL,OAAO,IAClB,oBAAC,QAAQ;IAAC,EAAE,EAAEC;EAAG,GAAKL,SAAS;IAAE,GAAG,EAAEO,OAAQ;IAAC,kBAAe;EAAM,IACjEH,OAAO,CAEX;EACDD,QAAQ,GAAGhB,YAAY,CAACgB,QAAQ,EAAE;IAAE,eAAe,EAAEE;EAAG,CAAC,CAAC;EAE1D,OACE,oBAAC,OAAO;IAAC,OAAO,EAAEI,IAAK;IAAC,GAAG,EAAEP;EAAI,GAAKN,YAAY,GAC/CO,QAAQ,CACD;AAEd,CAAC,CACF"}