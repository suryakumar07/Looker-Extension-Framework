{"version":3,"file":"useWindow.js","names":["React","useMemo","getWindowedListBoundaries","useCallbackRef","useMeasuredElement","useScrollPosition","useWindow","itemCount","enabled","itemHeight","ref","spacerTag","containerElement","callbackRef","height","scrollPosition","start","end","beforeHeight","afterHeight","Spacer","before","after"],"sources":["../../../src/utils/useWindow.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref } from 'react'\nimport React, { useMemo } from 'react'\nimport type { GetWindowedListBoundaryProps } from './getWindowedListBoundaries'\nimport { getWindowedListBoundaries } from './getWindowedListBoundaries'\nimport { useCallbackRef } from './useCallbackRef'\nimport { useMeasuredElement } from './useMeasuredElement'\nimport { useScrollPosition } from './useScrollPosition'\n\nexport type WindowSpacerTag = 'div' | 'li' | 'tr'\n\nexport type UseWindowProps<E extends HTMLElement> = Omit<\n  GetWindowedListBoundaryProps,\n  'height' | 'scrollPosition'\n> & {\n  /**\n   * Tag to use for the spacers above and below the window\n   */\n  spacerTag?: WindowSpacerTag\n  ref?: Ref<E>\n}\n\nexport const useWindow = <E extends HTMLElement = HTMLElement>({\n  itemCount,\n  enabled,\n  itemHeight,\n  ref,\n  spacerTag = 'div',\n}: UseWindowProps<E>) => {\n  const [containerElement, callbackRef] = useCallbackRef<E>(ref)\n  const [{ height }] = useMeasuredElement(enabled ? containerElement : null)\n  const scrollPosition = useScrollPosition(enabled ? containerElement : null)\n\n  const { start, end, beforeHeight, afterHeight } = useMemo(() => {\n    return getWindowedListBoundaries({\n      enabled,\n      height,\n      itemCount,\n      itemHeight,\n      scrollPosition,\n    })\n  }, [enabled, itemCount, height, itemHeight, scrollPosition])\n\n  const Spacer = spacerTag\n  // after & before are spacers to make scrolling smooth\n  const before =\n    beforeHeight > 0 ? (\n      <Spacer style={{ height: `${beforeHeight}px` }} data-testid=\"before\" />\n    ) : null\n  const after =\n    afterHeight > 0 ? (\n      <Spacer style={{ height: `${afterHeight}px` }} data-testid=\"after\" />\n    ) : null\n\n  return {\n    after,\n    before,\n    containerElement,\n    end,\n    ref: callbackRef,\n    start,\n  }\n}\n"],"mappings":";;AAMA,OAAOA,KAAK,IAAIC,OAAO,QAAQ,OAAO;AAEtC,SAASC,yBAAyB,QAAQ,6BAA6B;AACvE,SAASC,cAAc,QAAQ,kBAAkB;AACjD,SAASC,kBAAkB,QAAQ,sBAAsB;AACzD,SAASC,iBAAiB,QAAQ,qBAAqB;AAevD,OAAO,MAAMC,SAAS,GAAG,CAAsC;EAC7DC,SAAS;EACTC,OAAO;EACPC,UAAU;EACVC,GAAG;EACHC,SAAS,EAATA,UAAS,GAAG;AACK,CAAC,KAAK;EACvB,MAAM,CAACC,gBAAgB,EAAEC,WAAW,CAAC,GAAGV,cAAc,CAAIO,GAAG,CAAC;EAC9D,MAAM,CAAC;IAAEI;EAAO,CAAC,CAAC,GAAGV,kBAAkB,CAACI,OAAO,GAAGI,gBAAgB,GAAG,IAAI,CAAC;EAC1E,MAAMG,cAAc,GAAGV,iBAAiB,CAACG,OAAO,GAAGI,gBAAgB,GAAG,IAAI,CAAC;EAE3E,MAAM;IAAEI,KAAK;IAAEC,GAAG;IAAEC,YAAY;IAAEC;EAAY,CAAC,GAAGlB,OAAO,CAAC,MAAM;IAC9D,OAAOC,yBAAyB,CAAC;MAC/BM,OAAO;MACPM,MAAM;MACNP,SAAS;MACTE,UAAU;MACVM;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACP,OAAO,EAAED,SAAS,EAAEO,MAAM,EAAEL,UAAU,EAAEM,cAAc,CAAC,CAAC;EAE5D,MAAMK,MAAM,GAAGT,UAAS;EAExB,MAAMU,MAAM,GACVH,YAAY,GAAG,CAAC,GACd,oBAAC,MAAM;IAAC,KAAK,EAAE;MAAEJ,MAAM,EAAG,GAAEI,YAAa;IAAI,CAAE;IAAC,eAAY;EAAQ,EAAG,GACrE,IAAI;EACV,MAAMI,KAAK,GACTH,WAAW,GAAG,CAAC,GACb,oBAAC,MAAM;IAAC,KAAK,EAAE;MAAEL,MAAM,EAAG,GAAEK,WAAY;IAAI,CAAE;IAAC,eAAY;EAAO,EAAG,GACnE,IAAI;EAEV,OAAO;IACLG,KAAK;IACLD,MAAM;IACNT,gBAAgB;IAChBK,GAAG;IACHP,GAAG,EAAEG,WAAW;IAChBG;EACF,CAAC;AACH,CAAC"}