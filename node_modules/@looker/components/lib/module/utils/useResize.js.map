{"version":3,"file":"useResize.js","names":["throttle","useSafeLayoutEffect","useResize","element","handler","throttledHandler","resizeObserver","ResizeObserver","observe","window","addEventListener","removeEventListener","disconnect"],"sources":["../../../src/utils/useResize.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport throttle from 'lodash/throttle'\nimport { useSafeLayoutEffect } from './useSafeLayoutEffect'\n\n/**\n * Calls the provided handler function when the element is resized.\n * If the handler contains a state setter, it should be wrapped in useCallback to avoid an infinite loop.\n * @param element the element to observe\n * @param handler the function to call on resize\n */\nexport const useResize = (element: HTMLElement | null, handler: () => void) => {\n  useSafeLayoutEffect(() => {\n    const throttledHandler = throttle(handler, 100)\n\n    if (!element) {\n      return\n    }\n\n    handler()\n\n    const resizeObserver = new ResizeObserver(() => throttledHandler())\n\n    if (element) {\n      resizeObserver.observe(element as unknown as HTMLElement)\n    }\n\n    window.addEventListener('resize', throttledHandler)\n\n    return () => {\n      window.removeEventListener('resize', throttledHandler)\n      if (resizeObserver) {\n        resizeObserver.disconnect()\n      }\n    }\n  }, [handler, element])\n}\n"],"mappings":";;AAKA,OAAOA,QAAQ,MAAM,iBAAiB;AACtC,SAASC,mBAAmB,QAAQ,uBAAuB;;AAQ3D,OAAO,MAAMC,SAAS,GAAG,CAACC,OAA2B,EAAEC,OAAmB,KAAK;EAC7EH,mBAAmB,CAAC,MAAM;IACxB,MAAMI,gBAAgB,GAAGL,QAAQ,CAACI,OAAO,EAAE,GAAG,CAAC;IAE/C,IAAI,CAACD,OAAO,EAAE;MACZ;IACF;IAEAC,OAAO,EAAE;IAET,MAAME,cAAc,GAAG,IAAIC,cAAc,CAAC,MAAMF,gBAAgB,EAAE,CAAC;IAEnE,IAAIF,OAAO,EAAE;MACXG,cAAc,CAACE,OAAO,CAACL,OAAO,CAA2B;IAC3D;IAEAM,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEL,gBAAgB,CAAC;IAEnD,OAAO,MAAM;MACXI,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEN,gBAAgB,CAAC;MACtD,IAAIC,cAAc,EAAE;QAClBA,cAAc,CAACM,UAAU,EAAE;MAC7B;IACF,CAAC;EACH,CAAC,EAAE,CAACR,OAAO,EAAED,OAAO,CAAC,CAAC;AACxB,CAAC"}