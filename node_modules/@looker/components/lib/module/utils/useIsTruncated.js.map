{"version":3,"file":"useIsTruncated.js","names":["useState","useCallback","useSafeLayoutEffect","isOverflowing","useIsTruncated","element","identity","isTruncated","setIsTruncated","handleResize","resizeObserver","ResizeObserver","observe","disconnect"],"sources":["../../../src/utils/useIsTruncated.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { useState, useCallback } from 'react'\nimport { useSafeLayoutEffect } from './useSafeLayoutEffect'\nimport { isOverflowing } from './isOverflowing'\n\n/**\n * Detects if an element's content overflows its width using a ResizeObserver.\n * Avoid using repeatedly in long lists for performance concerns.\n */\nexport const useIsTruncated = (\n  element: HTMLElement | null,\n  identity?: number\n): boolean => {\n  const [isTruncated, setIsTruncated] = useState(false)\n\n  // Re-run truncation detection when element is resized.\n  // Could run on window resize or just dom element change\n  // thanks to Resize Observer.\n  const handleResize = useCallback(() => {\n    element && setIsTruncated(isOverflowing(element))\n  }, [element])\n\n  useSafeLayoutEffect(() => {\n    if (!element) {\n      return\n    }\n\n    const resizeObserver = new ResizeObserver(() => handleResize())\n    if (element) {\n      resizeObserver.observe(element as unknown as HTMLElement)\n    }\n\n    return () => {\n      if (!resizeObserver) {\n        return\n      }\n\n      resizeObserver.disconnect()\n    }\n  }, [handleResize, element, identity])\n\n  return isTruncated\n}\n"],"mappings":";;AAKA,SAASA,QAAQ,EAAEC,WAAW,QAAQ,OAAO;AAC7C,SAASC,mBAAmB,QAAQ,uBAAuB;AAC3D,SAASC,aAAa,QAAQ,iBAAiB;;AAM/C,OAAO,MAAMC,cAAc,GAAG,CAC5BC,OAA2B,EAC3BC,QAAiB,KACL;EACZ,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;;EAKrD,MAAMS,YAAY,GAAGR,WAAW,CAAC,MAAM;IACrCI,OAAO,IAAIG,cAAc,CAACL,aAAa,CAACE,OAAO,CAAC,CAAC;EACnD,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEbH,mBAAmB,CAAC,MAAM;IACxB,IAAI,CAACG,OAAO,EAAE;MACZ;IACF;IAEA,MAAMK,cAAc,GAAG,IAAIC,cAAc,CAAC,MAAMF,YAAY,EAAE,CAAC;IAC/D,IAAIJ,OAAO,EAAE;MACXK,cAAc,CAACE,OAAO,CAACP,OAAO,CAA2B;IAC3D;IAEA,OAAO,MAAM;MACX,IAAI,CAACK,cAAc,EAAE;QACnB;MACF;MAEAA,cAAc,CAACG,UAAU,EAAE;IAC7B,CAAC;EACH,CAAC,EAAE,CAACJ,YAAY,EAAEJ,OAAO,EAAEC,QAAQ,CAAC,CAAC;EAErC,OAAOC,WAAW;AACpB,CAAC"}