{"version":3,"file":"useFocusVisible.js","names":["useMemo","useState","css","focusVisibleCSSWrapper","styleFn","focusVisible","useFocusVisible","onBlur","onKeyUp","isFocusVisible","setFocusVisible","e","currentTarget","target"],"sources":["../../../src/utils/useFocusVisible.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { CompatibleHTMLProps } from '@looker/design-tokens'\nimport type { FocusEvent, KeyboardEvent } from 'react'\nimport { useMemo, useState } from 'react'\nimport type {\n  DefaultTheme,\n  FlattenInterpolation,\n  ThemedStyledProps,\n} from 'styled-components'\nimport { css } from 'styled-components'\n\nexport interface FocusVisibleProps {\n  focusVisible: boolean\n}\n\nexport type UseFocusVisibleProps<E extends HTMLElement> = Pick<\n  CompatibleHTMLProps<E>,\n  'onBlur' | 'onKeyUp'\n>\n\nexport const focusVisibleCSSWrapper = <Props extends FocusVisibleProps>(\n  styleFn: (\n    props: ThemedStyledProps<Props, DefaultTheme>\n  ) => FlattenInterpolation<ThemedStyledProps<Props, DefaultTheme>>\n) => css<Props>`\n  &:focus-visible {\n    ${styleFn}\n  }\n  ${({ focusVisible }) => focusVisible && styleFn}\n`\n\nexport const useFocusVisible = <E extends HTMLElement = HTMLElement>({\n  onBlur,\n  onKeyUp,\n}: UseFocusVisibleProps<E>) => {\n  const [isFocusVisible, setFocusVisible] = useState(false)\n\n  return useMemo(() => {\n    return {\n      focusVisible: isFocusVisible,\n      onBlur: (e: FocusEvent<E>) => {\n        setFocusVisible(false)\n        onBlur?.(e)\n      },\n      onKeyUp: (e: KeyboardEvent<E>) => {\n        if (e.currentTarget === e.target) {\n          setFocusVisible(true)\n        }\n        onKeyUp?.(e)\n      },\n    }\n  }, [isFocusVisible, onBlur, onKeyUp])\n}\n"],"mappings":";;;AAOA,SAASA,OAAO,EAAEC,QAAQ,QAAQ,OAAO;AAMzC,SAASC,GAAG,QAAQ,mBAAmB;AAWvC,OAAO,MAAMC,sBAAsB,GACjCC,OAEiE,IAC9DF,GAAG,cAAQ;AAChB;AACA,MAAI,CAAU;AACd;AACA,IAAE,CAAgD;AAClD,IAHME,OAAO,EAET,CAAC;EAAEC;AAAa,CAAC,KAAKA,YAAY,IAAID,OAAO,CAChD;AAED,OAAO,MAAME,eAAe,GAAG,CAAsC;EACnEC,MAAM;EACNC;AACuB,CAAC,KAAK;EAC7B,MAAM,CAACC,cAAc,EAAEC,eAAe,CAAC,GAAGT,QAAQ,CAAC,KAAK,CAAC;EAEzD,OAAOD,OAAO,CAAC,MAAM;IACnB,OAAO;MACLK,YAAY,EAAEI,cAAc;MAC5BF,MAAM,EAAGI,CAAgB,IAAK;QAC5BD,eAAe,CAAC,KAAK,CAAC;QACtBH,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAGI,CAAC,CAAC;MACb,CAAC;MACDH,OAAO,EAAGG,CAAmB,IAAK;QAChC,IAAIA,CAAC,CAACC,aAAa,KAAKD,CAAC,CAACE,MAAM,EAAE;UAChCH,eAAe,CAAC,IAAI,CAAC;QACvB;QACAF,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAGG,CAAC,CAAC;MACd;IACF,CAAC;EACH,CAAC,EAAE,CAACF,cAAc,EAAEF,MAAM,EAAEC,OAAO,CAAC,CAAC;AACvC,CAAC"}