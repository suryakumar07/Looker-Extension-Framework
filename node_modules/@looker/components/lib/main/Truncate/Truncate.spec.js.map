{"version":3,"file":"Truncate.spec.js","names":["jest","mock","isOverflowing","fn","longLabel","describe","test","mockImplementation","renderWithTheme","trigger","screen","getByText","fireEvent","mouseOver","tooltip","queryByRole","expect","not","toBeInTheDocument","getAllByText","waitFor","toBeVisible","mouseOut","waitForElementToBeRemoved"],"sources":["../../../src/Truncate/Truncate.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport {\n  fireEvent,\n  screen,\n  waitFor,\n  waitForElementToBeRemoved,\n} from '@testing-library/react'\nimport { Box2 } from '../Layout/Box2'\nimport { isOverflowing } from '../utils'\nimport { Truncate } from './Truncate'\n\n/**\n * JSDom doesn't replicate browser enough to trigger a measurable overflow\n * event.\n *\n * Mocking isOverflowing for now till we to figure out a clever way to\n * trigger overflow so test can prove the tooltip is enabled in overflow scenario\n */\njest.mock('../utils/isOverflowing', () => ({\n  isOverflowing: jest.fn(),\n}))\n\nconst longLabel = 'This is a long label that should trigger truncation'\n\ndescribe('Truncate', () => {\n  test('Basic', async () => {\n    // False means text is not overflowing\n    ;(isOverflowing as jest.Mock).mockImplementation(() => false)\n    renderWithTheme(<Truncate>Hello world</Truncate>)\n    const trigger = screen.getByText('Hello world')\n    fireEvent.mouseOver(trigger)\n\n    const tooltip = screen.queryByRole('tooltip')\n    expect(tooltip).not.toBeInTheDocument()\n  })\n\n  test('Truncate active', async () => {\n    ;(isOverflowing as jest.Mock).mockImplementation(() => true)\n    renderWithTheme(\n      <Box2 width=\"5rem\">\n        <Truncate>{longLabel}</Truncate>\n      </Box2>\n    )\n\n    const trigger = screen.getAllByText(longLabel)[0]\n    fireEvent.mouseOver(trigger)\n\n    const tooltip = screen.getAllByText(longLabel)[1]\n    await waitFor(() => expect(tooltip).toBeVisible())\n\n    fireEvent.mouseOut(tooltip)\n    await waitForElementToBeRemoved(() => screen.queryByRole('tooltip'))\n  })\n\n  test('Truncate detail', async () => {\n    ;(isOverflowing as jest.Mock).mockImplementation(() => true)\n    renderWithTheme(\n      <Truncate description=\"description text\">Hello World</Truncate>\n    )\n\n    const trigger = screen.getByText('Hello World')\n    fireEvent.mouseOver(trigger)\n\n    const tooltip = screen.getByText('description text')\n    await waitFor(() => expect(tooltip).toBeVisible())\n\n    fireEvent.mouseOut(tooltip)\n    await waitForElementToBeRemoved(() => screen.queryByRole('tooltip'))\n  })\n})\n"],"mappings":";;;;AAKA;AACA;AACA;AAMA;AACA;AACA;;AASAA,IAAI,CAACC,IAAI,CAAC,wBAAwB,EAAE;EAAA,OAAO;IACzCC,aAAa,EAAEF,IAAI,CAACG,EAAE;EACxB,CAAC;AAAA,CAAC,CAAC;AAEH,IAAMC,SAAS,GAAG,qDAAqD;AAEvEC,QAAQ,CAAC,UAAU,EAAE,YAAM;EACzBC,IAAI,CAAC,OAAO,6DAAE;IAAA;IAAA;MAAA;QAAA;UAEZ;UAAEJ,oBAAa,CAAeK,kBAAkB,CAAC;YAAA,OAAM,KAAK;UAAA,EAAC;UAC7D,IAAAC,oCAAe,EAAC,gCAAC,kBAAQ,sBAAuB,CAAC;UAC3CC,OAAO,GAAGC,cAAM,CAACC,SAAS,CAAC,aAAa,CAAC;UAC/CC,iBAAS,CAACC,SAAS,CAACJ,OAAO,CAAC;UAEtBK,OAAO,GAAGJ,cAAM,CAACK,WAAW,CAAC,SAAS,CAAC;UAC7CC,MAAM,CAACF,OAAO,CAAC,CAACG,GAAG,CAACC,iBAAiB,EAAE;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACxC,GAAC;EAEFZ,IAAI,CAAC,iBAAiB,6DAAE;IAAA;IAAA;MAAA;QAAA;UACtB;UAAEJ,oBAAa,CAAeK,kBAAkB,CAAC;YAAA,OAAM,IAAI;UAAA,EAAC;UAC5D,IAAAC,oCAAe,EACb,gCAAC,SAAI;YAAC,KAAK,EAAC;UAAM,GAChB,gCAAC,kBAAQ,QAAEJ,SAAS,CAAY,CAC3B,CACR;UAEKK,OAAO,GAAGC,cAAM,CAACS,YAAY,CAACf,SAAS,CAAC,CAAC,CAAC,CAAC;UACjDQ,iBAAS,CAACC,SAAS,CAACJ,OAAO,CAAC;UAEtBK,OAAO,GAAGJ,cAAM,CAACS,YAAY,CAACf,SAAS,CAAC,CAAC,CAAC,CAAC;UAAA;UAAA,OAC3C,IAAAgB,eAAO,EAAC;YAAA,OAAMJ,MAAM,CAACF,OAAO,CAAC,CAACO,WAAW,EAAE;UAAA,EAAC;QAAA;UAElDT,iBAAS,CAACU,QAAQ,CAACR,OAAO,CAAC;UAAA;UAAA,OACrB,IAAAS,iCAAyB,EAAC;YAAA,OAAMb,cAAM,CAACK,WAAW,CAAC,SAAS,CAAC;UAAA,EAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACrE,GAAC;EAEFT,IAAI,CAAC,iBAAiB,6DAAE;IAAA;IAAA;MAAA;QAAA;UACtB;UAAEJ,oBAAa,CAAeK,kBAAkB,CAAC;YAAA,OAAM,IAAI;UAAA,EAAC;UAC5D,IAAAC,oCAAe,EACb,gCAAC,kBAAQ;YAAC,WAAW,EAAC;UAAkB,iBAAuB,CAChE;UAEKC,OAAO,GAAGC,cAAM,CAACC,SAAS,CAAC,aAAa,CAAC;UAC/CC,iBAAS,CAACC,SAAS,CAACJ,OAAO,CAAC;UAEtBK,OAAO,GAAGJ,cAAM,CAACC,SAAS,CAAC,kBAAkB,CAAC;UAAA;UAAA,OAC9C,IAAAS,eAAO,EAAC;YAAA,OAAMJ,MAAM,CAACF,OAAO,CAAC,CAACO,WAAW,EAAE;UAAA,EAAC;QAAA;UAElDT,iBAAS,CAACU,QAAQ,CAACR,OAAO,CAAC;UAAA;UAAA,OACrB,IAAAS,iCAAyB,EAAC;YAAA,OAAMb,cAAM,CAACK,WAAW,CAAC,SAAS,CAAC;UAAA,EAAC;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACrE,GAAC;AACJ,CAAC,CAAC"}