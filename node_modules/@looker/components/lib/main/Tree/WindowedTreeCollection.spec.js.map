{"version":3,"file":"WindowedTreeCollection.spec.js","names":["globalGetBoundingClientRect","Element","prototype","getBoundingClientRect","describe","beforeEach","jest","fn","bottom","height","left","right","toJSON","top","width","x","y","afterEach","test","renderWithTheme","expect","screen","getByText","toBeVisible","openAllButton","fireEvent","click","queryByText","not","toBeInTheDocument","tree02"],"sources":["../../../src/Tree/WindowedTreeCollection.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport { fireEvent, screen } from '@testing-library/react'\nimport Windowing from './stories/Windowing'\n\n/* eslint-disable-next-line @typescript-eslint/unbound-method */\nconst globalGetBoundingClientRect = Element.prototype.getBoundingClientRect\n\ndescribe('WindowedTreeCollection', () => {\n  beforeEach(() => {\n    /* eslint-disable-next-line @typescript-eslint/unbound-method */\n    Element.prototype.getBoundingClientRect = jest.fn(() => {\n      return {\n        bottom: 0,\n        height: 342,\n        left: 0,\n        right: 0,\n        toJSON: jest.fn(),\n        top: 0,\n        width: 260,\n        x: 0,\n        y: 0,\n      }\n    })\n  })\n\n  afterEach(() => {\n    /* eslint-disable-next-line @typescript-eslint/unbound-method */\n    Element.prototype.getBoundingClientRect = globalGetBoundingClientRect\n  })\n\n  test('no windowing for 100 or fewer visible items', () => {\n    renderWithTheme(<Windowing noText />)\n    expect(screen.getByText('0')).toBeVisible()\n    expect(screen.getByText('99')).toBeVisible()\n  })\n\n  test('windowing for over 100 visible items', () => {\n    renderWithTheme(<Windowing noText />)\n    const openAllButton = screen.getByText('Toggle all open')\n    fireEvent.click(openAllButton)\n\n    expect(screen.getByText('0')).toBeVisible()\n    // Visible nested tree item\n    expect(screen.getByText('0-5-3')).toBeVisible()\n    // Not-visible nested tree item\n    expect(screen.queryByText('0-5-4')).not.toBeInTheDocument()\n    expect(screen.queryByText('99')).not.toBeInTheDocument()\n\n    // Collapse one of the trees\n    const tree02 = screen.getByText('0-2')\n    fireEvent.click(tree02)\n    // In-window nested tree items\n    expect(screen.getByText('0-5-4')).toBeVisible()\n    expect(screen.getByText('0-8-0')).toBeVisible()\n    // Below-window nested tree item\n    expect(screen.queryByText('0-8-1')).not.toBeInTheDocument()\n  })\n})\n"],"mappings":";;;AAKA;AACA;AACA;AACA;;AAGA,IAAMA,2BAA2B,GAAGC,OAAO,CAACC,SAAS,CAACC,qBAAqB;AAE3EC,QAAQ,CAAC,wBAAwB,EAAE,YAAM;EACvCC,UAAU,CAAC,YAAM;IAEfJ,OAAO,CAACC,SAAS,CAACC,qBAAqB,GAAGG,IAAI,CAACC,EAAE,CAAC,YAAM;MACtD,OAAO;QACLC,MAAM,EAAE,CAAC;QACTC,MAAM,EAAE,GAAG;QACXC,IAAI,EAAE,CAAC;QACPC,KAAK,EAAE,CAAC;QACRC,MAAM,EAAEN,IAAI,CAACC,EAAE,EAAE;QACjBM,GAAG,EAAE,CAAC;QACNC,KAAK,EAAE,GAAG;QACVC,CAAC,EAAE,CAAC;QACJC,CAAC,EAAE;MACL,CAAC;IACH,CAAC,CAAC;EACJ,CAAC,CAAC;EAEFC,SAAS,CAAC,YAAM;IAEdhB,OAAO,CAACC,SAAS,CAACC,qBAAqB,GAAGH,2BAA2B;EACvE,CAAC,CAAC;EAEFkB,IAAI,CAAC,6CAA6C,EAAE,YAAM;IACxD,IAAAC,oCAAe,EAAC,gCAAC,qBAAS;MAAC,MAAM;IAAA,EAAG,CAAC;IACrCC,MAAM,CAACC,cAAM,CAACC,SAAS,CAAC,GAAG,CAAC,CAAC,CAACC,WAAW,EAAE;IAC3CH,MAAM,CAACC,cAAM,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC,CAACC,WAAW,EAAE;EAC9C,CAAC,CAAC;EAEFL,IAAI,CAAC,sCAAsC,EAAE,YAAM;IACjD,IAAAC,oCAAe,EAAC,gCAAC,qBAAS;MAAC,MAAM;IAAA,EAAG,CAAC;IACrC,IAAMK,aAAa,GAAGH,cAAM,CAACC,SAAS,CAAC,iBAAiB,CAAC;IACzDG,iBAAS,CAACC,KAAK,CAACF,aAAa,CAAC;IAE9BJ,MAAM,CAACC,cAAM,CAACC,SAAS,CAAC,GAAG,CAAC,CAAC,CAACC,WAAW,EAAE;IAE3CH,MAAM,CAACC,cAAM,CAACC,SAAS,CAAC,OAAO,CAAC,CAAC,CAACC,WAAW,EAAE;IAE/CH,MAAM,CAACC,cAAM,CAACM,WAAW,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,CAACC,iBAAiB,EAAE;IAC3DT,MAAM,CAACC,cAAM,CAACM,WAAW,CAAC,IAAI,CAAC,CAAC,CAACC,GAAG,CAACC,iBAAiB,EAAE;;IAGxD,IAAMC,MAAM,GAAGT,cAAM,CAACC,SAAS,CAAC,KAAK,CAAC;IACtCG,iBAAS,CAACC,KAAK,CAACI,MAAM,CAAC;IAEvBV,MAAM,CAACC,cAAM,CAACC,SAAS,CAAC,OAAO,CAAC,CAAC,CAACC,WAAW,EAAE;IAC/CH,MAAM,CAACC,cAAM,CAACC,SAAS,CAAC,OAAO,CAAC,CAAC,CAACC,WAAW,EAAE;IAE/CH,MAAM,CAACC,cAAM,CAACM,WAAW,CAAC,OAAO,CAAC,CAAC,CAACC,GAAG,CAACC,iBAAiB,EAAE;EAC7D,CAAC,CAAC;AACJ,CAAC,CAAC"}