{"version":3,"file":"FieldTimeSelect.js","names":["FieldTimeSelect","styled","forwardRef","props","ref","validationMessage","useFormContext","id","useID","omitFieldProps","propsOnChange","onChange","fieldProps","useState","formatError","setFormatError","useTranslation","t","value","onBlur","errorMessage","message","type","pickFieldProps","getHasValue"],"sources":["../../../../../src/Form/Fields/FieldTimeSelect/FieldTimeSelect.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref } from 'react'\nimport React, { forwardRef, useState } from 'react'\nimport styled from 'styled-components'\nimport type { FloatingLabelFieldProps } from '../Field/types'\nimport type { ValidationMessageProps } from '../../ValidationMessage'\nimport { FloatingLabelField, omitFieldProps, pickFieldProps } from '../Field'\nimport { getHasValue } from '../Field/useFloatingLabel'\nimport { useFormContext } from '../../Form'\nimport { Tooltip } from '../../../Tooltip'\nimport { useID, useTranslation } from '../../../utils'\nimport type { InputTimeSelectProps } from '../../Inputs/InputTimeSelect'\nimport { InputTimeSelect } from '../../Inputs/InputTimeSelect'\nimport { VisuallyHidden } from '../../../VisuallyHidden'\n\nexport interface FieldTimeSelectProps\n  extends FloatingLabelFieldProps,\n    InputTimeSelectProps {}\n\nexport const FieldTimeSelect = styled(\n  forwardRef((props: FieldTimeSelectProps, ref: Ref<HTMLInputElement>) => {\n    const validationMessage = useFormContext(props)\n    const id = useID(props.id)\n    const { onChange: propsOnChange, ...fieldProps } = omitFieldProps(props)\n    const [formatError, setFormatError] = useState('')\n    const { t } = useTranslation('FieldTimeSelect')\n    const onChange = (value?: string) => {\n      propsOnChange?.(value)\n      if (value) {\n        setFormatError('')\n      } else {\n        setFormatError(t('Please use format HHMM'))\n      }\n    }\n\n    const onBlur = () => {\n      // Clear the format errors on blur since the combobox will revert back to\n      // the previously selected value or the new value is it is valid\n      setFormatError('')\n    }\n    const errorMessage = (\n      formatError ? { message: formatError, type: 'error' } : validationMessage\n    ) as ValidationMessageProps\n    return (\n      <FloatingLabelField\n        data-testid=\"FieldSelectMultiId\"\n        {...pickFieldProps(props)}\n        id={id}\n        hasValue={getHasValue(props)}\n      >\n        <Tooltip\n          placement=\"top-end\"\n          content={formatError}\n          isOpen={true}\n          canClose={() => false}\n        >\n          <div>\n            <VisuallyHidden aria-live=\"polite\">{formatError}</VisuallyHidden>\n            <InputTimeSelect\n              {...fieldProps}\n              aria-labelledby={`labelledby-${id}`}\n              id={id}\n              validationType={errorMessage?.type}\n              ref={ref}\n              onChange={onChange}\n              onBlur={onBlur}\n            />\n          </div>\n        </Tooltip>\n      </FloatingLabelField>\n    )\n  })\n)``\n"],"mappings":";;;;;;;;;;;;AAMA;AACA;AAGA;AACA;AACA;AACA;AACA;AAEA;AACA;AAAwD;AAAA;AAAA;AAAA;AAMjD,IAAMA,eAAe,GAAG,IAAAC,4BAAM,EACnC,IAAAC,iBAAU,EAAC,UAACC,KAA2B,EAAEC,GAA0B,EAAK;EACtE,IAAMC,iBAAiB,GAAG,IAAAC,oBAAc,EAACH,KAAK,CAAC;EAC/C,IAAMI,EAAE,GAAG,IAAAC,YAAK,EAACL,KAAK,CAACI,EAAE,CAAC;EAC1B,sBAAmD,IAAAE,qBAAc,EAACN,KAAK,CAAC;IAAtDO,aAAa,mBAAvBC,QAAQ;IAAoBC,UAAU;EAC9C,gBAAsC,IAAAC,eAAQ,EAAC,EAAE,CAAC;IAAA;IAA3CC,WAAW;IAAEC,cAAc;EAClC,sBAAc,IAAAC,qBAAc,EAAC,iBAAiB,CAAC;IAAvCC,CAAC,mBAADA,CAAC;EACT,IAAMN,QAAQ,GAAG,SAAXA,QAAQ,CAAIO,KAAc,EAAK;IACnCR,aAAa,aAAbA,aAAa,uBAAbA,aAAa,CAAGQ,KAAK,CAAC;IACtB,IAAIA,KAAK,EAAE;MACTH,cAAc,CAAC,EAAE,CAAC;IACpB,CAAC,MAAM;MACLA,cAAc,CAACE,CAAC,CAAC,wBAAwB,CAAC,CAAC;IAC7C;EACF,CAAC;EAED,IAAME,MAAM,GAAG,SAATA,MAAM,GAAS;IAGnBJ,cAAc,CAAC,EAAE,CAAC;EACpB,CAAC;EACD,IAAMK,YAAY,GAChBN,WAAW,GAAG;IAAEO,OAAO,EAAEP,WAAW;IAAEQ,IAAI,EAAE;EAAQ,CAAC,GAAGjB,iBAC/B;EAC3B,OACE,gCAAC,yBAAkB;IACjB,eAAY;EAAoB,GAC5B,IAAAkB,qBAAc,EAACpB,KAAK,CAAC;IACzB,EAAE,EAAEI,EAAG;IACP,QAAQ,EAAE,IAAAiB,6BAAW,EAACrB,KAAK;EAAE,IAE7B,gCAAC,gBAAO;IACN,SAAS,EAAC,SAAS;IACnB,OAAO,EAAEW,WAAY;IACrB,MAAM,EAAE,IAAK;IACb,QAAQ,EAAE;MAAA,OAAM,KAAK;IAAA;EAAC,GAEtB,6CACE,gCAAC,8BAAc;IAAC,aAAU;EAAQ,GAAEA,WAAW,CAAkB,EACjE,gCAAC,gCAAe,gCACVF,UAAU;IACd,wCAA+BL,EAAE,CAAG;IACpC,EAAE,EAAEA,EAAG;IACP,cAAc,EAAEa,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEE,IAAK;IACnC,GAAG,EAAElB,GAAI;IACT,QAAQ,EAAEO,QAAS;IACnB,MAAM,EAAEQ;EAAO,GACf,CACE,CACE,CACS;AAEzB,CAAC,CAAC,CACH;EAAA;EAAA;AAAA,wFAAE;AAAA"}