{"version":3,"file":"useAddOptionToContext.js","names":["useAddOptionToContext","context","value","label","scrollIntoView","useContext","optionsRef","windowingPropRef","indexRef","useRef","useEffect","option","optionsRefCurrent","current","windowing","splice","push","index","indexOf"],"sources":["../../../../../../src/Form/Inputs/Combobox/utils/useAddOptionToContext.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Context } from 'react'\nimport { useEffect, useRef, useContext } from 'react'\nimport type {\n  ComboboxContextProps,\n  ComboboxMultiContextProps,\n} from '../ComboboxContext'\n\nexport function useAddOptionToContext<\n  CProps extends ComboboxContextProps | ComboboxMultiContextProps\n>(\n  context: Context<CProps>,\n  value: string,\n  label?: string,\n  scrollIntoView?: boolean\n) {\n  const { optionsRef, windowingPropRef } = useContext(context)\n  const indexRef = useRef<number>(-1)\n\n  useEffect(() => {\n    const option = { label, scrollIntoView, value }\n    const optionsRefCurrent = optionsRef && optionsRef.current\n    const windowing = windowingPropRef && windowingPropRef.current\n    if (optionsRefCurrent && !windowing) {\n      // Was this option already in the list?\n      // If so, re-insert it at the same spot\n      if (indexRef.current > -1) {\n        optionsRefCurrent.splice(indexRef.current, 0, option)\n      } else {\n        optionsRefCurrent.push(option)\n      }\n    }\n    return () => {\n      // Delete option from the array but save the index so it can be re-inserted there\n      if (optionsRefCurrent && !windowing) {\n        const index = optionsRefCurrent.indexOf(option)\n        indexRef.current = index\n        optionsRefCurrent.splice(index, 1)\n      }\n    }\n  }, [value, label, optionsRef, scrollIntoView, windowingPropRef])\n}\n"],"mappings":";;;;;;AAMA;;AAMO,SAASA,qBAAqB,CAGnCC,OAAwB,EACxBC,KAAa,EACbC,KAAc,EACdC,cAAwB,EACxB;EACA,kBAAyC,IAAAC,iBAAU,EAACJ,OAAO,CAAC;IAApDK,UAAU,eAAVA,UAAU;IAAEC,gBAAgB,eAAhBA,gBAAgB;EACpC,IAAMC,QAAQ,GAAG,IAAAC,aAAM,EAAS,CAAC,CAAC,CAAC;EAEnC,IAAAC,gBAAS,EAAC,YAAM;IACd,IAAMC,MAAM,GAAG;MAAER,KAAK,EAALA,KAAK;MAAEC,cAAc,EAAdA,cAAc;MAAEF,KAAK,EAALA;IAAM,CAAC;IAC/C,IAAMU,iBAAiB,GAAGN,UAAU,IAAIA,UAAU,CAACO,OAAO;IAC1D,IAAMC,SAAS,GAAGP,gBAAgB,IAAIA,gBAAgB,CAACM,OAAO;IAC9D,IAAID,iBAAiB,IAAI,CAACE,SAAS,EAAE;MAGnC,IAAIN,QAAQ,CAACK,OAAO,GAAG,CAAC,CAAC,EAAE;QACzBD,iBAAiB,CAACG,MAAM,CAACP,QAAQ,CAACK,OAAO,EAAE,CAAC,EAAEF,MAAM,CAAC;MACvD,CAAC,MAAM;QACLC,iBAAiB,CAACI,IAAI,CAACL,MAAM,CAAC;MAChC;IACF;IACA,OAAO,YAAM;MAEX,IAAIC,iBAAiB,IAAI,CAACE,SAAS,EAAE;QACnC,IAAMG,KAAK,GAAGL,iBAAiB,CAACM,OAAO,CAACP,MAAM,CAAC;QAC/CH,QAAQ,CAACK,OAAO,GAAGI,KAAK;QACxBL,iBAAiB,CAACG,MAAM,CAACE,KAAK,EAAE,CAAC,CAAC;MACpC;IACF,CAAC;EACH,CAAC,EAAE,CAACf,KAAK,EAAEC,KAAK,EAAEG,UAAU,EAAEF,cAAc,EAAEG,gBAAgB,CAAC,CAAC;AAClE"}