{"version":3,"file":"useListWidths.js","names":["useListWidths","isVisible","propsMinWidth","minWidth","propsWidth","width","wrapperElement","useState","setWidth","setMinWidth","useEffect","getWrapperWidth","getBoundingClientRect","newWidth","newMinWidth","undefined"],"sources":["../../../../../../src/Form/Inputs/Combobox/utils/useListWidths.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { useEffect, useState } from 'react'\nimport type { WidthProps, MinWidthProps } from '@looker/design-tokens'\n\nexport interface UseListWidthProps extends MinWidthProps, WidthProps {\n  isVisible?: boolean\n  wrapperElement?: HTMLElement | null\n}\n\nexport function useListWidths({\n  isVisible,\n  minWidth: propsMinWidth,\n  width: propsWidth,\n  wrapperElement,\n}: UseListWidthProps) {\n  const [width, setWidth] = useState<WidthProps['width']>('auto')\n  const [minWidth, setMinWidth] = useState<MinWidthProps['minWidth']>()\n\n  useEffect(() => {\n    // Avoid calling expensive getBoundingClientWidth if width/minWidth are defined in props\n    // or if the list is currently not visible\n    function getWrapperWidth() {\n      return wrapperElement && wrapperElement.getBoundingClientRect().width\n    }\n    if (isVisible) {\n      const newWidth = propsWidth || getWrapperWidth() || 'auto'\n      const newMinWidth =\n        propsMinWidth || (propsWidth === 'auto' ? getWrapperWidth() : undefined)\n\n      setWidth(newWidth)\n      setMinWidth(newMinWidth)\n    }\n  }, [propsMinWidth, propsWidth, wrapperElement, isVisible])\n\n  return { minWidth, width }\n}\n"],"mappings":";;;;;;;;AAKA;;AAQO,SAASA,aAAa,OAKP;EAAA,IAJpBC,SAAS,QAATA,SAAS;IACCC,aAAa,QAAvBC,QAAQ;IACDC,UAAU,QAAjBC,KAAK;IACLC,cAAc,QAAdA,cAAc;EAEd,gBAA0B,IAAAC,eAAQ,EAAsB,MAAM,CAAC;IAAA;IAAxDF,KAAK;IAAEG,QAAQ;EACtB,iBAAgC,IAAAD,eAAQ,GAA6B;IAAA;IAA9DJ,QAAQ;IAAEM,WAAW;EAE5B,IAAAC,gBAAS,EAAC,YAAM;IAGd,SAASC,eAAe,GAAG;MACzB,OAAOL,cAAc,IAAIA,cAAc,CAACM,qBAAqB,EAAE,CAACP,KAAK;IACvE;IACA,IAAIJ,SAAS,EAAE;MACb,IAAMY,QAAQ,GAAGT,UAAU,IAAIO,eAAe,EAAE,IAAI,MAAM;MAC1D,IAAMG,WAAW,GACfZ,aAAa,KAAKE,UAAU,KAAK,MAAM,GAAGO,eAAe,EAAE,GAAGI,SAAS,CAAC;MAE1EP,QAAQ,CAACK,QAAQ,CAAC;MAClBJ,WAAW,CAACK,WAAW,CAAC;IAC1B;EACF,CAAC,EAAE,CAACZ,aAAa,EAAEE,UAAU,EAAEE,cAAc,EAAEL,SAAS,CAAC,CAAC;EAE1D,OAAO;IAAEE,QAAQ,EAARA,QAAQ;IAAEE,KAAK,EAALA;EAAM,CAAC;AAC5B"}