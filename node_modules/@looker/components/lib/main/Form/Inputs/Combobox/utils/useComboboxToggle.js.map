{"version":3,"file":"useComboboxToggle.js","names":["visibleStates","ComboboxState","SUGGESTING","NAVIGATING","INTERACTING","getIsVisible","state","includes","useComboboxToggle","option","onOpen","onClose","isVisible","isVisibleRef","useRef","useEffect","current"],"sources":["../../../../../../src/Form/Inputs/Combobox/utils/useComboboxToggle.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\n// Much of the following is pulled from https://github.com/reach/reach-ui\n// because their work is fantastic (but is not in TypeScript)\n\nimport { useRef, useEffect } from 'react'\nimport type {\n  ComboboxCallback,\n  MaybeComboboxOptionObject,\n  ComboboxOptionType,\n} from '../types'\nimport { ComboboxState } from '../utils/state'\n\nconst visibleStates = [\n  ComboboxState.SUGGESTING,\n  ComboboxState.NAVIGATING,\n  ComboboxState.INTERACTING,\n]\nexport const getIsVisible = (state: ComboboxState) =>\n  visibleStates.includes(state)\n\n// Detect when to call onOpen and onClose\nexport function useComboboxToggle<\n  TOption extends ComboboxOptionType = MaybeComboboxOptionObject\n>(\n  state: ComboboxState,\n  option: TOption,\n  onOpen?: ComboboxCallback<TOption>,\n  onClose?: ComboboxCallback<TOption>\n) {\n  const isVisible = getIsVisible(state)\n  const isVisibleRef = useRef(isVisible)\n\n  useEffect(() => {\n    if (isVisible && !isVisibleRef.current) {\n      onOpen && onOpen(option)\n      isVisibleRef.current = true\n    } else if (!isVisible && isVisibleRef.current) {\n      onClose && onClose(option)\n      isVisibleRef.current = false\n    }\n  }, [isVisible, isVisibleRef, onOpen, onClose, option])\n\n  return isVisible\n}\n"],"mappings":";;;;;;;AAQA;AAMA;;AAEA,IAAMA,aAAa,GAAG,CACpBC,oBAAa,CAACC,UAAU,EACxBD,oBAAa,CAACE,UAAU,EACxBF,oBAAa,CAACG,WAAW,CAC1B;AACM,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,KAAoB;EAAA,OAC/CN,aAAa,CAACO,QAAQ,CAACD,KAAK,CAAC;AAAA;;AAAA;AAGxB,SAASE,iBAAiB,CAG/BF,KAAoB,EACpBG,MAAe,EACfC,MAAkC,EAClCC,OAAmC,EACnC;EACA,IAAMC,SAAS,GAAGP,YAAY,CAACC,KAAK,CAAC;EACrC,IAAMO,YAAY,GAAG,IAAAC,aAAM,EAACF,SAAS,CAAC;EAEtC,IAAAG,gBAAS,EAAC,YAAM;IACd,IAAIH,SAAS,IAAI,CAACC,YAAY,CAACG,OAAO,EAAE;MACtCN,MAAM,IAAIA,MAAM,CAACD,MAAM,CAAC;MACxBI,YAAY,CAACG,OAAO,GAAG,IAAI;IAC7B,CAAC,MAAM,IAAI,CAACJ,SAAS,IAAIC,YAAY,CAACG,OAAO,EAAE;MAC7CL,OAAO,IAAIA,OAAO,CAACF,MAAM,CAAC;MAC1BI,YAAY,CAACG,OAAO,GAAG,KAAK;IAC9B;EACF,CAAC,EAAE,CAACJ,SAAS,EAAEC,YAAY,EAAEH,MAAM,EAAEC,OAAO,EAAEF,MAAM,CAAC,CAAC;EAEtD,OAAOG,SAAS;AAClB"}