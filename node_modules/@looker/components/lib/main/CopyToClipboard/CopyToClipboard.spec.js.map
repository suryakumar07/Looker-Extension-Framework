{"version":3,"file":"CopyToClipboard.spec.js","names":["CopyToClipboardComponent","content","describe","beforeAll","Object","defineProperty","document","value","jest","fn","it","renderWithTheme","expect","screen","getByText","toBeVisible","copyButton","fireEvent","click","useFakeTimers","button","act","runOnlyPendingTimers","useRealTimers","spyOn","execCommand","toHaveBeenCalledWith"],"sources":["../../../src/CopyToClipboard/CopyToClipboard.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { act, fireEvent, screen } from '@testing-library/react'\nimport React from 'react'\nimport { renderWithTheme } from '@looker/components-test-utils'\nimport { Button } from '../Button'\nimport { CopyToClipboard } from './CopyToClipboard'\n\nconst CopyToClipboardComponent = () => {\n  const content = 'here is some text to be copied'\n  return <CopyToClipboard content={content} />\n}\n\ndescribe('CopyToClipboard', () => {\n  beforeAll(() => {\n    Object.defineProperty(document, 'execCommand', { value: jest.fn() })\n  })\n\n  it('renders the CopyToClipboard', () => {\n    renderWithTheme(<CopyToClipboardComponent />)\n    expect(screen.getByText('Copy to Clipboard')).toBeVisible()\n  })\n\n  it('renders the CopyToClipboard with different string values as children and success', () => {\n    const content = 'here is some text to be copied'\n    renderWithTheme(\n      <CopyToClipboard content={content} success=\"it was copied\">\n        copy something\n      </CopyToClipboard>\n    )\n    const copyButton = screen.getByText('copy something')\n    expect(copyButton).toBeVisible()\n    fireEvent.click(copyButton)\n    expect(screen.getByText('it was copied')).toBeVisible()\n  })\n\n  it('renders the CopyToClipboard with different components as children and success', () => {\n    const content = 'here is some text to be copied'\n    renderWithTheme(\n      <CopyToClipboard content={content} success={<Button>Success</Button>}>\n        <Button>Copy stuff</Button>\n      </CopyToClipboard>\n    )\n    const copyButton = screen.getByText('Copy stuff')\n    expect(copyButton).toBeVisible()\n    fireEvent.click(copyButton)\n    expect(screen.getByText('Success')).toBeVisible()\n  })\n\n  it('transitions from copy to copied state and back when clicked', async () => {\n    jest.useFakeTimers()\n    renderWithTheme(<CopyToClipboardComponent />)\n    const button = screen.getByText('Copy to Clipboard')\n    fireEvent.click(button)\n    expect(screen.getByText('Copied')).toBeVisible()\n    act(() => {\n      jest.runOnlyPendingTimers()\n    })\n    expect(screen.getByText('Copy to Clipboard')).toBeVisible()\n    jest.useRealTimers()\n  })\n\n  it('copies the refs textarea content on copy click', () => {\n    jest.spyOn(document, 'execCommand')\n    renderWithTheme(<CopyToClipboardComponent />)\n    const button = screen.getByText('Copy to Clipboard')\n    fireEvent.click(button)\n    expect(document.execCommand).toHaveBeenCalledWith('copy')\n  })\n})\n"],"mappings":"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"}