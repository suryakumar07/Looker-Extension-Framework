{"version":3,"file":"useIsTruncated.js","names":["useIsTruncated","element","identity","useState","isTruncated","setIsTruncated","handleResize","useCallback","isOverflowing","useSafeLayoutEffect","resizeObserver","ResizeObserver","observe","disconnect"],"sources":["../../../src/utils/useIsTruncated.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { useState, useCallback } from 'react'\nimport { useSafeLayoutEffect } from './useSafeLayoutEffect'\nimport { isOverflowing } from './isOverflowing'\n\n/**\n * Detects if an element's content overflows its width using a ResizeObserver.\n * Avoid using repeatedly in long lists for performance concerns.\n */\nexport const useIsTruncated = (\n  element: HTMLElement | null,\n  identity?: number\n): boolean => {\n  const [isTruncated, setIsTruncated] = useState(false)\n\n  // Re-run truncation detection when element is resized.\n  // Could run on window resize or just dom element change\n  // thanks to Resize Observer.\n  const handleResize = useCallback(() => {\n    element && setIsTruncated(isOverflowing(element))\n  }, [element])\n\n  useSafeLayoutEffect(() => {\n    if (!element) {\n      return\n    }\n\n    const resizeObserver = new ResizeObserver(() => handleResize())\n    if (element) {\n      resizeObserver.observe(element as unknown as HTMLElement)\n    }\n\n    return () => {\n      if (!resizeObserver) {\n        return\n      }\n\n      resizeObserver.disconnect()\n    }\n  }, [handleResize, element, identity])\n\n  return isTruncated\n}\n"],"mappings":";;;;;;;;AAKA;AACA;AACA;;AAMO,IAAMA,cAAc,GAAG,SAAjBA,cAAc,CACzBC,OAA2B,EAC3BC,QAAiB,EACL;EACZ,gBAAsC,IAAAC,eAAQ,EAAC,KAAK,CAAC;IAAA;IAA9CC,WAAW;IAAEC,cAAc;;EAKlC,IAAMC,YAAY,GAAG,IAAAC,kBAAW,EAAC,YAAM;IACrCN,OAAO,IAAII,cAAc,CAAC,IAAAG,4BAAa,EAACP,OAAO,CAAC,CAAC;EACnD,CAAC,EAAE,CAACA,OAAO,CAAC,CAAC;EAEb,IAAAQ,wCAAmB,EAAC,YAAM;IACxB,IAAI,CAACR,OAAO,EAAE;MACZ;IACF;IAEA,IAAMS,cAAc,GAAG,IAAIC,cAAc,CAAC;MAAA,OAAML,YAAY,EAAE;IAAA,EAAC;IAC/D,IAAIL,OAAO,EAAE;MACXS,cAAc,CAACE,OAAO,CAACX,OAAO,CAA2B;IAC3D;IAEA,OAAO,YAAM;MACX,IAAI,CAACS,cAAc,EAAE;QACnB;MACF;MAEAA,cAAc,CAACG,UAAU,EAAE;IAC7B,CAAC;EACH,CAAC,EAAE,CAACP,YAAY,EAAEL,OAAO,EAAEC,QAAQ,CAAC,CAAC;EAErC,OAAOE,WAAW;AACpB,CAAC;AAAA"}