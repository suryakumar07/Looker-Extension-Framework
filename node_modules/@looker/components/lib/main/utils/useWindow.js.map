{"version":3,"file":"useWindow.js","names":["useWindow","itemCount","enabled","itemHeight","ref","spacerTag","useCallbackRef","containerElement","callbackRef","useMeasuredElement","height","scrollPosition","useScrollPosition","useMemo","getWindowedListBoundaries","start","end","beforeHeight","afterHeight","Spacer","before","after"],"sources":["../../../src/utils/useWindow.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { Ref } from 'react'\nimport React, { useMemo } from 'react'\nimport type { GetWindowedListBoundaryProps } from './getWindowedListBoundaries'\nimport { getWindowedListBoundaries } from './getWindowedListBoundaries'\nimport { useCallbackRef } from './useCallbackRef'\nimport { useMeasuredElement } from './useMeasuredElement'\nimport { useScrollPosition } from './useScrollPosition'\n\nexport type WindowSpacerTag = 'div' | 'li' | 'tr'\n\nexport type UseWindowProps<E extends HTMLElement> = Omit<\n  GetWindowedListBoundaryProps,\n  'height' | 'scrollPosition'\n> & {\n  /**\n   * Tag to use for the spacers above and below the window\n   */\n  spacerTag?: WindowSpacerTag\n  ref?: Ref<E>\n}\n\nexport const useWindow = <E extends HTMLElement = HTMLElement>({\n  itemCount,\n  enabled,\n  itemHeight,\n  ref,\n  spacerTag = 'div',\n}: UseWindowProps<E>) => {\n  const [containerElement, callbackRef] = useCallbackRef<E>(ref)\n  const [{ height }] = useMeasuredElement(enabled ? containerElement : null)\n  const scrollPosition = useScrollPosition(enabled ? containerElement : null)\n\n  const { start, end, beforeHeight, afterHeight } = useMemo(() => {\n    return getWindowedListBoundaries({\n      enabled,\n      height,\n      itemCount,\n      itemHeight,\n      scrollPosition,\n    })\n  }, [enabled, itemCount, height, itemHeight, scrollPosition])\n\n  const Spacer = spacerTag\n  // after & before are spacers to make scrolling smooth\n  const before =\n    beforeHeight > 0 ? (\n      <Spacer style={{ height: `${beforeHeight}px` }} data-testid=\"before\" />\n    ) : null\n  const after =\n    afterHeight > 0 ? (\n      <Spacer style={{ height: `${afterHeight}px` }} data-testid=\"after\" />\n    ) : null\n\n  return {\n    after,\n    before,\n    containerElement,\n    end,\n    ref: callbackRef,\n    start,\n  }\n}\n"],"mappings":";;;;;;;;;AAMA;AAEA;AACA;AACA;AACA;AAAuD;AAAA;;AAehD,IAAMA,SAAS,GAAG,SAAZA,SAAS,OAMG;EAAA,IALvBC,SAAS,QAATA,SAAS;IACTC,OAAO,QAAPA,OAAO;IACPC,UAAU,QAAVA,UAAU;IACVC,GAAG,QAAHA,GAAG;IAAA,sBACHC,SAAS;IAATA,SAAS,+BAAG,KAAK;EAEjB,sBAAwC,IAAAC,+BAAc,EAAIF,GAAG,CAAC;IAAA;IAAvDG,gBAAgB;IAAEC,WAAW;EACpC,0BAAqB,IAAAC,uCAAkB,EAACP,OAAO,GAAGK,gBAAgB,GAAG,IAAI,CAAC;IAAA;IAAjEG,MAAM,2BAANA,MAAM;EACf,IAAMC,cAAc,GAAG,IAAAC,oCAAiB,EAACV,OAAO,GAAGK,gBAAgB,GAAG,IAAI,CAAC;EAE3E,eAAkD,IAAAM,cAAO,EAAC,YAAM;MAC9D,OAAO,IAAAC,oDAAyB,EAAC;QAC/BZ,OAAO,EAAPA,OAAO;QACPQ,MAAM,EAANA,MAAM;QACNT,SAAS,EAATA,SAAS;QACTE,UAAU,EAAVA,UAAU;QACVQ,cAAc,EAAdA;MACF,CAAC,CAAC;IACJ,CAAC,EAAE,CAACT,OAAO,EAAED,SAAS,EAAES,MAAM,EAAEP,UAAU,EAAEQ,cAAc,CAAC,CAAC;IARpDI,KAAK,YAALA,KAAK;IAAEC,GAAG,YAAHA,GAAG;IAAEC,YAAY,YAAZA,YAAY;IAAEC,WAAW,YAAXA,WAAW;EAU7C,IAAMC,MAAM,GAAGd,SAAS;EAExB,IAAMe,MAAM,GACVH,YAAY,GAAG,CAAC,GACd,gCAAC,MAAM;IAAC,KAAK,EAAE;MAAEP,MAAM,YAAKO,YAAY;IAAK,CAAE;IAAC,eAAY;EAAQ,EAAG,GACrE,IAAI;EACV,IAAMI,KAAK,GACTH,WAAW,GAAG,CAAC,GACb,gCAAC,MAAM;IAAC,KAAK,EAAE;MAAER,MAAM,YAAKQ,WAAW;IAAK,CAAE;IAAC,eAAY;EAAO,EAAG,GACnE,IAAI;EAEV,OAAO;IACLG,KAAK,EAALA,KAAK;IACLD,MAAM,EAANA,MAAM;IACNb,gBAAgB,EAAhBA,gBAAgB;IAChBS,GAAG,EAAHA,GAAG;IACHZ,GAAG,EAAEI,WAAW;IAChBO,KAAK,EAALA;EACF,CAAC;AACH,CAAC;AAAA"}