{"version":3,"file":"useFocusVisible.js","names":["focusVisibleCSSWrapper","styleFn","css","focusVisible","useFocusVisible","onBlur","onKeyUp","useState","isFocusVisible","setFocusVisible","useMemo","e","currentTarget","target"],"sources":["../../../src/utils/useFocusVisible.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { CompatibleHTMLProps } from '@looker/design-tokens'\nimport type { FocusEvent, KeyboardEvent } from 'react'\nimport { useMemo, useState } from 'react'\nimport type {\n  DefaultTheme,\n  FlattenInterpolation,\n  ThemedStyledProps,\n} from 'styled-components'\nimport { css } from 'styled-components'\n\nexport interface FocusVisibleProps {\n  focusVisible: boolean\n}\n\nexport type UseFocusVisibleProps<E extends HTMLElement> = Pick<\n  CompatibleHTMLProps<E>,\n  'onBlur' | 'onKeyUp'\n>\n\nexport const focusVisibleCSSWrapper = <Props extends FocusVisibleProps>(\n  styleFn: (\n    props: ThemedStyledProps<Props, DefaultTheme>\n  ) => FlattenInterpolation<ThemedStyledProps<Props, DefaultTheme>>\n) => css<Props>`\n  &:focus-visible {\n    ${styleFn}\n  }\n  ${({ focusVisible }) => focusVisible && styleFn}\n`\n\nexport const useFocusVisible = <E extends HTMLElement = HTMLElement>({\n  onBlur,\n  onKeyUp,\n}: UseFocusVisibleProps<E>) => {\n  const [isFocusVisible, setFocusVisible] = useState(false)\n\n  return useMemo(() => {\n    return {\n      focusVisible: isFocusVisible,\n      onBlur: (e: FocusEvent<E>) => {\n        setFocusVisible(false)\n        onBlur?.(e)\n      },\n      onKeyUp: (e: KeyboardEvent<E>) => {\n        if (e.currentTarget === e.target) {\n          setFocusVisible(true)\n        }\n        onKeyUp?.(e)\n      },\n    }\n  }, [isFocusVisible, onBlur, onKeyUp])\n}\n"],"mappings":";;;;;;;;;AAOA;AAMA;AAAuC;AAWhC,IAAMA,sBAAsB,GAAG,SAAzBA,sBAAsB,CACjCC,OAEiE;EAAA,WAC9DC,qBAAG,sIAEFD,OAAO,EAET;IAAA,IAAGE,YAAY,QAAZA,YAAY;IAAA,OAAOA,YAAY,IAAIF,OAAO;EAAA;AAAA,CAChD;AAAA;AAEM,IAAMG,eAAe,GAAG,SAAlBA,eAAe,QAGG;EAAA,IAF7BC,OAAM,SAANA,MAAM;IACNC,QAAO,SAAPA,OAAO;EAEP,gBAA0C,IAAAC,eAAQ,EAAC,KAAK,CAAC;IAAA;IAAlDC,cAAc;IAAEC,eAAe;EAEtC,OAAO,IAAAC,cAAO,EAAC,YAAM;IACnB,OAAO;MACLP,YAAY,EAAEK,cAAc;MAC5BH,MAAM,EAAE,gBAACM,CAAgB,EAAK;QAC5BF,eAAe,CAAC,KAAK,CAAC;QACtBJ,OAAM,aAANA,OAAM,uBAANA,OAAM,CAAGM,CAAC,CAAC;MACb,CAAC;MACDL,OAAO,EAAE,iBAACK,CAAmB,EAAK;QAChC,IAAIA,CAAC,CAACC,aAAa,KAAKD,CAAC,CAACE,MAAM,EAAE;UAChCJ,eAAe,CAAC,IAAI,CAAC;QACvB;QACAH,QAAO,aAAPA,QAAO,uBAAPA,QAAO,CAAGK,CAAC,CAAC;MACd;IACF,CAAC;EACH,CAAC,EAAE,CAACH,cAAc,EAAEH,OAAM,EAAEC,QAAO,CAAC,CAAC;AACvC,CAAC;AAAA"}