{"version":3,"file":"useClickable.js","names":["useClickable","onClick","disabled","role","rest","useFocusVisible","onKeyUp","focusVisibleProps","useMemo","e","shouldHandle","currentTarget","target","key","undefined","tabIndex"],"sources":["../../../src/utils/useClickable.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { CompatibleHTMLProps } from '@looker/design-tokens'\nimport type { KeyboardEvent, MouseEvent as ReactMouseEvent } from 'react'\nimport { useMemo } from 'react'\nimport type { FocusVisibleProps } from './useFocusVisible'\nimport { useFocusVisible } from './useFocusVisible'\n\n// Helper interfaces for components using this hook\nexport type GenericOnClick<E extends HTMLElement> = (\n  e: ReactMouseEvent<E, MouseEvent> | KeyboardEvent<E>\n) => void\n\nexport interface GenericClickProps<E extends HTMLElement>\n  extends Omit<CompatibleHTMLProps<E>, 'onClick'> {\n  onClick?: GenericOnClick<E>\n}\n\ntype Attributes = 'disabled' | 'onBlur' | 'onKeyUp' | 'role'\n\nexport interface UseClickableProps<E extends HTMLElement>\n  extends Pick<CompatibleHTMLProps<E>, Attributes>,\n    Pick<GenericClickProps<E>, 'onClick'> {}\n\nexport interface UseClickableResult<E extends HTMLElement>\n  extends Pick<CompatibleHTMLProps<E>, Attributes | 'onClick' | 'tabIndex'>,\n    FocusVisibleProps {}\n/**\n * This hook provides keyboard accessibility for any component that renders a non-button element\n * that is both focus-able and clickable. The component should handle styling for focusVisible.\n */\nexport function useClickable<E extends HTMLElement>({\n  onClick,\n  disabled,\n  role,\n  ...rest\n}: UseClickableProps<E>): UseClickableResult<E> {\n  const { onKeyUp, ...focusVisibleProps } = useFocusVisible(rest)\n\n  return useMemo(\n    () => ({\n      disabled,\n      ...focusVisibleProps,\n      onClick: (e: ReactMouseEvent<E, MouseEvent>) => {\n        if (!disabled) {\n          // use onClick from useFocusVisible â€“ it's the true click handler\n          onClick?.(e)\n        }\n      },\n      onKeyUp: (e: KeyboardEvent<E>) => {\n        const shouldHandle = !disabled && e.currentTarget === e.target\n        if (shouldHandle) {\n          switch (e.key) {\n            case 'Enter':\n            case ' ':\n              onClick?.(e)\n              break\n          }\n        }\n        onKeyUp(e)\n      },\n      // if onClick is used, role should be 'button' unless otherwise specified\n      // otherwise undefined b/c depending on usage, 'button' could be misleading\n      role: role || (onClick ? 'button' : undefined),\n      tabIndex: disabled ? undefined : 0,\n    }),\n    [disabled, role, onClick, onKeyUp, focusVisibleProps]\n  )\n}\n"],"mappings":";;;;;;;;;AAOA;AAEA;AAAmD;EAAA;AAAA;AAAA;AAyB5C,SAASA,YAAY,OAKoB;EAAA,IAJ9CC,QAAO,QAAPA,OAAO;IACPC,QAAQ,QAARA,QAAQ;IACRC,IAAI,QAAJA,IAAI;IACDC,IAAI;EAEP,uBAA0C,IAAAC,iCAAe,EAACD,IAAI,CAAC;IAAvDE,QAAO,oBAAPA,OAAO;IAAKC,iBAAiB;EAErC,OAAO,IAAAC,cAAO,EACZ;IAAA;MACEN,QAAQ,EAARA;IAAQ,GACLK,iBAAiB;MACpBN,OAAO,EAAE,iBAACQ,CAAiC,EAAK;QAC9C,IAAI,CAACP,QAAQ,EAAE;UAEbD,QAAO,aAAPA,QAAO,uBAAPA,QAAO,CAAGQ,CAAC,CAAC;QACd;MACF,CAAC;MACDH,OAAO,EAAE,iBAACG,CAAmB,EAAK;QAChC,IAAMC,YAAY,GAAG,CAACR,QAAQ,IAAIO,CAAC,CAACE,aAAa,KAAKF,CAAC,CAACG,MAAM;QAC9D,IAAIF,YAAY,EAAE;UAChB,QAAQD,CAAC,CAACI,GAAG;YACX,KAAK,OAAO;YACZ,KAAK,GAAG;cACNZ,QAAO,aAAPA,QAAO,uBAAPA,QAAO,CAAGQ,CAAC,CAAC;cACZ;UAAK;QAEX;QACAH,QAAO,CAACG,CAAC,CAAC;MACZ,CAAC;MAGDN,IAAI,EAAEA,IAAI,KAAKF,QAAO,GAAG,QAAQ,GAAGa,SAAS,CAAC;MAC9CC,QAAQ,EAAEb,QAAQ,GAAGY,SAAS,GAAG;IAAC;EAAA,CAClC,EACF,CAACZ,QAAQ,EAAEC,IAAI,EAAEF,QAAO,EAAEK,QAAO,EAAEC,iBAAiB,CAAC,CACtD;AACH"}