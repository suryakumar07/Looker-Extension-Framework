{"version":3,"file":"sort_utils.js","names":["stringComparator","stringA","stringB","upperCasedStringA","toUpperCase","upperCasedStringB","dateComparator","dateA","dateB","doDataTableSort","data","columns","id","sortDirection","sortedData","updatedColumns","targetColumn","find","column","forEach","type","sort","a","b"],"sources":["../../../../src/DataTable/utils/sort_utils.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport type { DataTableColumns } from '../Column'\n\nexport const stringComparator = (stringA: string, stringB: string) => {\n  const upperCasedStringA = stringA.toUpperCase()\n  const upperCasedStringB = stringB.toUpperCase()\n\n  if (upperCasedStringA < upperCasedStringB) return -1\n  if (upperCasedStringA > upperCasedStringB) return 1\n  return 0\n}\n\nexport const dateComparator = (dateA: Date, dateB: Date) => {\n  if (dateA < dateB) return -1\n  if (dateA > dateB) return 1\n  return 0\n}\n\n// Guy Ellis 2022-09-23 - The data table sorting is based on a DataTableColumnType which is either undefined or\n// one of \"string\" | \"number\" | \"date\". The comparator in the sort method is based on the data type.\n// However, there is no strong typing between the data and the \"type\". In other words, even if the\n// type says \"number\" we have no TypeScript verifiable way to ensure that the associated data is a number.\n// Of course, we can do type narrowing at each instance usage but that would then risk unanticipated runtime\n// errors if there were a non-match that still currently provided the user with some functionality even though\n// that might not be perfectly correct.\n// At some point in the future we might want to split doDataTableSort() into 3 methods that each operate on a\n// given data type or we might want to pass the comparator() method as a parameter. This would allow up to\n// remove the no-explicit-any disable. b/201417582\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type DataTableDatum = Record<string, any>\nexport type DataTableData = DataTableDatum[]\n\nexport const doDataTableSort = <T>(\n  data: T[],\n  columns: DataTableColumns,\n  id: string,\n  sortDirection: 'asc' | 'desc'\n) => {\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  const sortedData: Array<{ [key: string]: any }> = [...data]\n  const updatedColumns = [...columns]\n  const targetColumn = updatedColumns.find(column => column.id === id)\n\n  // The default sort behavior only allows for one column to appear sorted at a time\n  // Using delete operator to clean out all sortDirection properties in our columns array\n  columns.forEach(column => delete column.sortDirection)\n  if (targetColumn) {\n    if (targetColumn.type === 'number') {\n      if (sortDirection === 'desc') {\n        sortedData.sort((a, b) => b[id] - a[id])\n      } else {\n        sortedData.sort((a, b) => a[id] - b[id])\n      }\n    } else if (targetColumn.type === 'date') {\n      if (sortDirection === 'desc') {\n        sortedData.sort((a, b) => dateComparator(b[id], a[id]))\n      } else {\n        sortedData.sort((a, b) => dateComparator(a[id], b[id]))\n      }\n    } else {\n      if (sortDirection === 'desc') {\n        sortedData.sort((a, b) => stringComparator(b[id], a[id]))\n      } else {\n        sortedData.sort((a, b) => stringComparator(a[id], b[id]))\n      }\n    }\n    targetColumn.sortDirection = sortDirection\n  }\n\n  return {\n    columns: updatedColumns,\n    data: sortedData as T[],\n  }\n}\n"],"mappings":"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"}