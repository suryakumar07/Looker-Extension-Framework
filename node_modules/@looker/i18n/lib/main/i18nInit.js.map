{"version":3,"file":"i18nInit.js","names":["i18nInitOptions","fallbackLng","initImmediate","interpolation","escapeValue","keySeparator","lng","missingKeyHandler","languages","ns","key","process","env","NODE_ENV","Error","join","nsSeparator","saveMissing","i18nUpdate","resources","locale","Object","keys","forEach","allNamespaces","i18next","addResourceBundle","language","changeLanguage","i18nInit","options","isInitialized","init"],"sources":["../../src/i18nInit.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport i18next from 'i18next'\nimport type { InitOptions } from 'i18next'\nimport type { I18nState } from './types'\n\nexport const i18nInitOptions: InitOptions = {\n  fallbackLng: 'en',\n  initImmediate: false,\n  interpolation: {\n    escapeValue: false,\n  },\n  keySeparator: false,\n  lng: 'en',\n  missingKeyHandler: (languages: string[], ns: string, key: string) => {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error(\n        `Missing i18n key (${languages.join(', ')}): \"${key}\" in ${ns}`\n      )\n    }\n  },\n  nsSeparator: false,\n  saveMissing: true,\n}\n\nexport const i18nUpdate = ({ resources, locale }: Partial<I18nState>) => {\n  if (resources) {\n    Object.keys(resources).forEach((lng: string) => {\n      const allNamespaces = resources[lng]\n      Object.keys(allNamespaces).forEach((ns: string) => {\n        i18next.addResourceBundle(lng, ns, allNamespaces[ns])\n      })\n    })\n  }\n  if (locale && locale !== i18next.language) {\n    i18next.changeLanguage(locale)\n  }\n}\n\nexport async function i18nInit(options: I18nState) {\n  if (i18next.isInitialized) {\n    i18nUpdate(options)\n  }\n  i18next.init({\n    ...i18nInitOptions,\n    lng: options.locale,\n    // add optional resources from args\n    resources: options.resources,\n  })\n  return i18next\n}\n"],"mappings":";;;;;;;;;;AAKA;AAA6B;AAAA;AAItB,IAAMA,eAA4B,GAAG;EAC1CC,WAAW,EAAE,IAAI;EACjBC,aAAa,EAAE,KAAK;EACpBC,aAAa,EAAE;IACbC,WAAW,EAAE;EACf,CAAC;EACDC,YAAY,EAAE,KAAK;EACnBC,GAAG,EAAE,IAAI;EACTC,iBAAiB,EAAE,2BAACC,SAAmB,EAAEC,EAAU,EAAEC,GAAW,EAAK;IACnE,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;MACzC,MAAM,IAAIC,KAAK,6BACQN,SAAS,CAACO,IAAI,CAAC,IAAI,CAAC,kBAAOL,GAAG,mBAAQD,EAAE,EAC9D;IACH;EACF,CAAC;EACDO,WAAW,EAAE,KAAK;EAClBC,WAAW,EAAE;AACf,CAAC;AAAA;AAEM,IAAMC,UAAU,GAAG,SAAbA,UAAU,OAAkD;EAAA,IAA5CC,SAAS,QAATA,SAAS;IAAEC,MAAM,QAANA,MAAM;EAC5C,IAAID,SAAS,EAAE;IACbE,MAAM,CAACC,IAAI,CAACH,SAAS,CAAC,CAACI,OAAO,CAAC,UAACjB,GAAW,EAAK;MAC9C,IAAMkB,aAAa,GAAGL,SAAS,CAACb,GAAG,CAAC;MACpCe,MAAM,CAACC,IAAI,CAACE,aAAa,CAAC,CAACD,OAAO,CAAC,UAACd,EAAU,EAAK;QACjDgB,mBAAO,CAACC,iBAAiB,CAACpB,GAAG,EAAEG,EAAE,EAAEe,aAAa,CAACf,EAAE,CAAC,CAAC;MACvD,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACA,IAAIW,MAAM,IAAIA,MAAM,KAAKK,mBAAO,CAACE,QAAQ,EAAE;IACzCF,mBAAO,CAACG,cAAc,CAACR,MAAM,CAAC;EAChC;AACF,CAAC;AAAA;AAAA,SAEqBS,QAAQ;EAAA;AAAA;AAAA;EAAA,uEAAvB,iBAAwBC,OAAkB;IAAA;MAAA;QAAA;UAC/C,IAAIL,mBAAO,CAACM,aAAa,EAAE;YACzBb,UAAU,CAACY,OAAO,CAAC;UACrB;UACAL,mBAAO,CAACO,IAAI,iCACPhC,eAAe;YAClBM,GAAG,EAAEwB,OAAO,CAACV,MAAM;YAEnBD,SAAS,EAAEW,OAAO,CAACX;UAAS,GAC5B;UAAA,iCACKM,mBAAO;QAAA;QAAA;UAAA;MAAA;IAAA;EAAA,CACf;EAAA;AAAA"}