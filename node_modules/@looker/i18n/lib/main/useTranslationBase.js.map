{"version":3,"file":"useTranslationBase.js","names":["enResourcesMissing","en","nameSpaceArr","resources","Object","keys","some","ns","i18next","hasResourceBundle","useTranslationBase","options","isEn","language","i18nInitComponents","useTranslationOrig"],"sources":["../../src/useTranslationBase.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport i18next from 'i18next'\nimport { useTranslation as useTranslationOrig } from 'react-i18next'\nimport type { Namespace, UseTranslationOptions } from 'react-i18next'\nimport { i18nInitComponents } from './i18nInitComponents'\nimport type { I18nStateWithDates } from './types'\n\n// Check whether all namespaces in the en locale are already loaded to the i18next instance\nconst enResourcesMissing = (en: Partial<I18nStateWithDates>) => {\n  const nameSpaceArr = en.resources && Object.keys(en.resources)\n  return nameSpaceArr?.some(ns => !i18next.hasResourceBundle('en', ns))\n}\n\n/**\n * A base hook that each package can use to create its own implementation of useTranslation.\n * @param en the package-specific fallback translations (English) are loaded to the i18next instance.\n * The remaining arguments and the response follow useTranslation from react-i18next\n */\nexport const useTranslationBase = <N extends Namespace>(\n  en: Partial<I18nStateWithDates>,\n  ns?: N,\n  options?: UseTranslationOptions\n) => {\n  const isEn = !i18next.language || i18next.language === 'en'\n  if (isEn && enResourcesMissing(en)) {\n    i18nInitComponents(en)\n  }\n  return useTranslationOrig(ns, options)\n}\n"],"mappings":";;;;;;;AAKA;AACA;AAEA;;AAIA,IAAMA,kBAAkB,GAAG,SAArBA,kBAAkB,CAAIC,EAA+B,EAAK;EAC9D,IAAMC,YAAY,GAAGD,EAAE,CAACE,SAAS,IAAIC,MAAM,CAACC,IAAI,CAACJ,EAAE,CAACE,SAAS,CAAC;EAC9D,OAAOD,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEI,IAAI,CAAC,UAAAC,EAAE;IAAA,OAAI,CAACC,mBAAO,CAACC,iBAAiB,CAAC,IAAI,EAAEF,EAAE,CAAC;EAAA,EAAC;AACvE,CAAC;;AAOM,IAAMG,kBAAkB,GAAG,SAArBA,kBAAkB,CAC7BT,EAA+B,EAC/BM,EAAM,EACNI,OAA+B,EAC5B;EACH,IAAMC,IAAI,GAAG,CAACJ,mBAAO,CAACK,QAAQ,IAAIL,mBAAO,CAACK,QAAQ,KAAK,IAAI;EAC3D,IAAID,IAAI,IAAIZ,kBAAkB,CAACC,EAAE,CAAC,EAAE;IAClC,IAAAa,sCAAkB,EAACb,EAAE,CAAC;EACxB;EACA,OAAO,IAAAc,4BAAkB,EAACR,EAAE,EAAEI,OAAO,CAAC;AACxC,CAAC;AAAA"}