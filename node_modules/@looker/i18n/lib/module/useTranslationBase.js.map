{"version":3,"file":"useTranslationBase.js","names":["i18next","useTranslation","useTranslationOrig","i18nInitComponents","enResourcesMissing","en","nameSpaceArr","resources","Object","keys","some","ns","hasResourceBundle","useTranslationBase","options","isEn","language"],"sources":["../../src/useTranslationBase.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport i18next from 'i18next'\nimport { useTranslation as useTranslationOrig } from 'react-i18next'\nimport type { Namespace, UseTranslationOptions } from 'react-i18next'\nimport { i18nInitComponents } from './i18nInitComponents'\nimport type { I18nStateWithDates } from './types'\n\n// Check whether all namespaces in the en locale are already loaded to the i18next instance\nconst enResourcesMissing = (en: Partial<I18nStateWithDates>) => {\n  const nameSpaceArr = en.resources && Object.keys(en.resources)\n  return nameSpaceArr?.some(ns => !i18next.hasResourceBundle('en', ns))\n}\n\n/**\n * A base hook that each package can use to create its own implementation of useTranslation.\n * @param en the package-specific fallback translations (English) are loaded to the i18next instance.\n * The remaining arguments and the response follow useTranslation from react-i18next\n */\nexport const useTranslationBase = <N extends Namespace>(\n  en: Partial<I18nStateWithDates>,\n  ns?: N,\n  options?: UseTranslationOptions\n) => {\n  const isEn = !i18next.language || i18next.language === 'en'\n  if (isEn && enResourcesMissing(en)) {\n    i18nInitComponents(en)\n  }\n  return useTranslationOrig(ns, options)\n}\n"],"mappings":";;AAKA,OAAOA,OAAO,MAAM,SAAS;AAC7B,SAASC,cAAc,IAAIC,kBAAkB,QAAQ,eAAe;AAEpE,SAASC,kBAAkB,QAAQ,sBAAsB;AAIzD,MAAMC,kBAAkB,GAAIC,EAA+B,IAAK;EAC9D,MAAMC,YAAY,GAAGD,EAAE,CAACE,SAAS,IAAIC,MAAM,CAACC,IAAI,CAACJ,EAAE,CAACE,SAAS,CAAC;EAC9D,OAAOD,YAAY,aAAZA,YAAY,uBAAZA,YAAY,CAAEI,IAAI,CAACC,EAAE,IAAI,CAACX,OAAO,CAACY,iBAAiB,CAAC,IAAI,EAAED,EAAE,CAAC,CAAC;AACvE,CAAC;;AAOD,OAAO,MAAME,kBAAkB,GAAG,CAChCR,EAA+B,EAC/BM,EAAM,EACNG,OAA+B,KAC5B;EACH,MAAMC,IAAI,GAAG,CAACf,OAAO,CAACgB,QAAQ,IAAIhB,OAAO,CAACgB,QAAQ,KAAK,IAAI;EAC3D,IAAID,IAAI,IAAIX,kBAAkB,CAACC,EAAE,CAAC,EAAE;IAClCF,kBAAkB,CAACE,EAAE,CAAC;EACxB;EACA,OAAOH,kBAAkB,CAACS,EAAE,EAAEG,OAAO,CAAC;AACxC,CAAC"}