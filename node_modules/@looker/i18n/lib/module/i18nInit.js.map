{"version":3,"file":"i18nInit.js","names":["i18next","i18nInitOptions","fallbackLng","initImmediate","interpolation","escapeValue","keySeparator","lng","missingKeyHandler","languages","ns","key","process","env","NODE_ENV","Error","join","nsSeparator","saveMissing","i18nUpdate","resources","locale","Object","keys","forEach","allNamespaces","addResourceBundle","language","changeLanguage","i18nInit","options","isInitialized","init"],"sources":["../../src/i18nInit.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport i18next from 'i18next'\nimport type { InitOptions } from 'i18next'\nimport type { I18nState } from './types'\n\nexport const i18nInitOptions: InitOptions = {\n  fallbackLng: 'en',\n  initImmediate: false,\n  interpolation: {\n    escapeValue: false,\n  },\n  keySeparator: false,\n  lng: 'en',\n  missingKeyHandler: (languages: string[], ns: string, key: string) => {\n    if (process.env.NODE_ENV !== 'production') {\n      throw new Error(\n        `Missing i18n key (${languages.join(', ')}): \"${key}\" in ${ns}`\n      )\n    }\n  },\n  nsSeparator: false,\n  saveMissing: true,\n}\n\nexport const i18nUpdate = ({ resources, locale }: Partial<I18nState>) => {\n  if (resources) {\n    Object.keys(resources).forEach((lng: string) => {\n      const allNamespaces = resources[lng]\n      Object.keys(allNamespaces).forEach((ns: string) => {\n        i18next.addResourceBundle(lng, ns, allNamespaces[ns])\n      })\n    })\n  }\n  if (locale && locale !== i18next.language) {\n    i18next.changeLanguage(locale)\n  }\n}\n\nexport async function i18nInit(options: I18nState) {\n  if (i18next.isInitialized) {\n    i18nUpdate(options)\n  }\n  i18next.init({\n    ...i18nInitOptions,\n    lng: options.locale,\n    // add optional resources from args\n    resources: options.resources,\n  })\n  return i18next\n}\n"],"mappings":";;;;AAKA,OAAOA,OAAO,MAAM,SAAS;AAI7B,OAAO,MAAMC,eAA4B,GAAG;EAC1CC,WAAW,EAAE,IAAI;EACjBC,aAAa,EAAE,KAAK;EACpBC,aAAa,EAAE;IACbC,WAAW,EAAE;EACf,CAAC;EACDC,YAAY,EAAE,KAAK;EACnBC,GAAG,EAAE,IAAI;EACTC,iBAAiB,EAAE,CAACC,SAAmB,EAAEC,EAAU,EAAEC,GAAW,KAAK;IACnE,IAAIC,OAAO,CAACC,GAAG,CAACC,QAAQ,KAAK,YAAY,EAAE;MACzC,MAAM,IAAIC,KAAK,CACZ,qBAAoBN,SAAS,CAACO,IAAI,CAAC,IAAI,CAAE,OAAML,GAAI,QAAOD,EAAG,EAAC,CAChE;IACH;EACF,CAAC;EACDO,WAAW,EAAE,KAAK;EAClBC,WAAW,EAAE;AACf,CAAC;AAED,OAAO,MAAMC,UAAU,GAAG,CAAC;EAAEC,SAAS;EAAEC;AAA2B,CAAC,KAAK;EACvE,IAAID,SAAS,EAAE;IACbE,MAAM,CAACC,IAAI,CAACH,SAAS,CAAC,CAACI,OAAO,CAAEjB,GAAW,IAAK;MAC9C,MAAMkB,aAAa,GAAGL,SAAS,CAACb,GAAG,CAAC;MACpCe,MAAM,CAACC,IAAI,CAACE,aAAa,CAAC,CAACD,OAAO,CAAEd,EAAU,IAAK;QACjDV,OAAO,CAAC0B,iBAAiB,CAACnB,GAAG,EAAEG,EAAE,EAAEe,aAAa,CAACf,EAAE,CAAC,CAAC;MACvD,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EACA,IAAIW,MAAM,IAAIA,MAAM,KAAKrB,OAAO,CAAC2B,QAAQ,EAAE;IACzC3B,OAAO,CAAC4B,cAAc,CAACP,MAAM,CAAC;EAChC;AACF,CAAC;AAED,OAAO,eAAeQ,QAAQ,CAACC,OAAkB,EAAE;EACjD,IAAI9B,OAAO,CAAC+B,aAAa,EAAE;IACzBZ,UAAU,CAACW,OAAO,CAAC;EACrB;EACA9B,OAAO,CAACgC,IAAI,iCACP/B,eAAe;IAClBM,GAAG,EAAEuB,OAAO,CAACT,MAAM;IAEnBD,SAAS,EAAEU,OAAO,CAACV;EAAS,GAC5B;EACF,OAAOpB,OAAO;AAChB"}