{"version":3,"file":"utils.spec.js","names":["test","mockMatches","jest","fn","Object","defineProperty","document","value","createElement","activeElement","matches","render","container","activateFocusTrap","element","waitFor","expect","toHaveBeenCalledWith"],"sources":["../../../src/FocusTrap/utils.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { waitFor, render } from '@testing-library/react'\nimport { activateFocusTrap } from './utils'\n\n// Even though JSDom doesn't natively support :focus-visible, this test still\n// works because we mock matches() and it will not throw.\ntest('activateFocusTrap calls document.activeElement.matches(\":focus-visible\") to focus the first element', async () => {\n  const mockMatches = jest.fn()\n\n  // The activeElement property has only a getter, thus we need to redefine\n  // it using Object.defineProperty.\n  Object.defineProperty(document, 'activeElement', {\n    value: document.createElement('button'),\n  })\n\n  // TS does not see the Object.defineProperty.\n  if (document.activeElement) {\n    document.activeElement.matches = mockMatches\n  }\n\n  const { container } = render(<button>Button</button>)\n  activateFocusTrap({ element: container })\n  await waitFor(() => {\n    expect(mockMatches).toHaveBeenCalledWith(':focus-visible')\n  })\n})\n"],"mappings":";;;;AAKA;AACA;AACA;;AAIAA,IAAI,CAAC,qGAAqG,6DAAE;EAAA;EAAA;IAAA;MAAA;QACpGC,WAAW,GAAGC,IAAI,CAACC,EAAE,EAAE;QAI7BC,MAAM,CAACC,cAAc,CAACC,QAAQ,EAAE,eAAe,EAAE;UAC/CC,KAAK,EAAED,QAAQ,CAACE,aAAa,CAAC,QAAQ;QACxC,CAAC,CAAC;;QAGF,IAAIF,QAAQ,CAACG,aAAa,EAAE;UAC1BH,QAAQ,CAACG,aAAa,CAACC,OAAO,GAAGT,WAAW;QAC9C;QAAC,UAEqB,IAAAU,cAAM,EAAC,yDAAuB,CAAC,EAA7CC,SAAS,WAATA,SAAS;QACjB,IAAAC,wBAAiB,EAAC;UAAEC,OAAO,EAAEF;QAAU,CAAC,CAAC;QAAA;QAAA,OACnC,IAAAG,eAAO,EAAC,YAAM;UAClBC,MAAM,CAACf,WAAW,CAAC,CAACgB,oBAAoB,CAAC,gBAAgB,CAAC;QAC5D,CAAC,CAAC;MAAA;MAAA;QAAA;IAAA;EAAA;AAAA,CACH,GAAC"}