{"version":3,"file":"utils.js","names":["getActiveTrap","trapMap","traps","Object","values","length","sortedTraps","sort","trapA","trapB","relationship","element","compareDocumentPosition"],"sources":["../../../src/TrapStack/utils.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\nimport type { TrapMap } from './types'\n\nexport const getActiveTrap = <O = unknown>(trapMap: TrapMap<O>) => {\n  // Sort the traps according to their element's dom position and return the last\n  // which we assume to be stacked on top since all components using Portal\n  // share a single zIndexFloor and use dom order to determine stacking\n  const traps = Object.values(trapMap)\n  if (traps.length === 0) return\n\n  const sortedTraps = traps.sort((trapA, trapB) => {\n    const relationship = trapA.element.compareDocumentPosition(trapB.element)\n    return relationship > 3 ? 1 : -1\n  })\n  return sortedTraps[0]\n}\n"],"mappings":";;;;;;;AAMO,IAAMA,aAAa,GAAG,SAAhBA,aAAa,CAAiBC,OAAmB,EAAK;EAIjE,IAAMC,KAAK,GAAGC,MAAM,CAACC,MAAM,CAACH,OAAO,CAAC;EACpC,IAAIC,KAAK,CAACG,MAAM,KAAK,CAAC,EAAE;EAExB,IAAMC,WAAW,GAAGJ,KAAK,CAACK,IAAI,CAAC,UAACC,KAAK,EAAEC,KAAK,EAAK;IAC/C,IAAMC,YAAY,GAAGF,KAAK,CAACG,OAAO,CAACC,uBAAuB,CAACH,KAAK,CAACE,OAAO,CAAC;IACzE,OAAOD,YAAY,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;EAClC,CAAC,CAAC;EACF,OAAOJ,WAAW,CAAC,CAAC,CAAC;AACvB,CAAC;AAAA"}