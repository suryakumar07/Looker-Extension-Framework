{"version":3,"file":"useI18n.js","names":["useI18n","dateLocale","locale","resources","i18next","isInitialized","i18nInitComponents","useEffect","update","on","off"],"sources":["../../../src/I18n/useI18n.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { i18nInitComponents } from '@looker/i18n'\nimport type { I18nStateWithDates } from '@looker/i18n'\nimport i18next from 'i18next'\nimport { useEffect } from 'react'\n\nexport type UseI18nProps = Partial<I18nStateWithDates>\n\nexport const useI18n = ({ dateLocale, locale, resources }: UseI18nProps) => {\n  if (!i18next.isInitialized) {\n    i18nInitComponents({ dateLocale, locale, resources })\n  }\n\n  useEffect(() => {\n    const update = () => i18nInitComponents({ dateLocale, locale, resources })\n    if (i18next.isInitialized) {\n      update()\n    } else {\n      i18next.on('initialized', update)\n    }\n    return () => {\n      i18next.off('initialized', update)\n    }\n  }, [dateLocale, locale, resources])\n}\n"],"mappings":";;;;;;;AAKA;AAEA;AACA;;AAIO,IAAMA,OAAO,GAAG,SAAVA,OAAO,OAAwD;EAAA,IAAlDC,UAAU,QAAVA,UAAU;IAAEC,MAAM,QAANA,MAAM;IAAEC,SAAS,QAATA,SAAS;EACrD,IAAI,CAACC,mBAAO,CAACC,aAAa,EAAE;IAC1B,IAAAC,wBAAkB,EAAC;MAAEL,UAAU,EAAVA,UAAU;MAAEC,MAAM,EAANA,MAAM;MAAEC,SAAS,EAATA;IAAU,CAAC,CAAC;EACvD;EAEA,IAAAI,gBAAS,EAAC,YAAM;IACd,IAAMC,MAAM,GAAG,SAATA,MAAM;MAAA,OAAS,IAAAF,wBAAkB,EAAC;QAAEL,UAAU,EAAVA,UAAU;QAAEC,MAAM,EAANA,MAAM;QAAEC,SAAS,EAATA;MAAU,CAAC,CAAC;IAAA;IAC1E,IAAIC,mBAAO,CAACC,aAAa,EAAE;MACzBG,MAAM,EAAE;IACV,CAAC,MAAM;MACLJ,mBAAO,CAACK,EAAE,CAAC,aAAa,EAAED,MAAM,CAAC;IACnC;IACA,OAAO,YAAM;MACXJ,mBAAO,CAACM,GAAG,CAAC,aAAa,EAAEF,MAAM,CAAC;IACpC,CAAC;EACH,CAAC,EAAE,CAACP,UAAU,EAAEC,MAAM,EAAEC,SAAS,CAAC,CAAC;AACrC,CAAC;AAAA"}