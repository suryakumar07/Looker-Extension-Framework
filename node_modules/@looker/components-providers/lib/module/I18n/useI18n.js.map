{"version":3,"file":"useI18n.js","names":["i18nInitComponents","i18next","useEffect","useI18n","dateLocale","locale","resources","isInitialized","update","on","off"],"sources":["../../../src/I18n/useI18n.ts"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport { i18nInitComponents } from '@looker/i18n'\nimport type { I18nStateWithDates } from '@looker/i18n'\nimport i18next from 'i18next'\nimport { useEffect } from 'react'\n\nexport type UseI18nProps = Partial<I18nStateWithDates>\n\nexport const useI18n = ({ dateLocale, locale, resources }: UseI18nProps) => {\n  if (!i18next.isInitialized) {\n    i18nInitComponents({ dateLocale, locale, resources })\n  }\n\n  useEffect(() => {\n    const update = () => i18nInitComponents({ dateLocale, locale, resources })\n    if (i18next.isInitialized) {\n      update()\n    } else {\n      i18next.on('initialized', update)\n    }\n    return () => {\n      i18next.off('initialized', update)\n    }\n  }, [dateLocale, locale, resources])\n}\n"],"mappings":";;AAKA,SAASA,kBAAkB,QAAQ,cAAc;AAEjD,OAAOC,OAAO,MAAM,SAAS;AAC7B,SAASC,SAAS,QAAQ,OAAO;AAIjC,OAAO,MAAMC,OAAO,GAAG,CAAC;EAAEC,UAAU;EAAEC,MAAM;EAAEC;AAAwB,CAAC,KAAK;EAC1E,IAAI,CAACL,OAAO,CAACM,aAAa,EAAE;IAC1BP,kBAAkB,CAAC;MAAEI,UAAU;MAAEC,MAAM;MAAEC;IAAU,CAAC,CAAC;EACvD;EAEAJ,SAAS,CAAC,MAAM;IACd,MAAMM,MAAM,GAAG,MAAMR,kBAAkB,CAAC;MAAEI,UAAU;MAAEC,MAAM;MAAEC;IAAU,CAAC,CAAC;IAC1E,IAAIL,OAAO,CAACM,aAAa,EAAE;MACzBC,MAAM,EAAE;IACV,CAAC,MAAM;MACLP,OAAO,CAACQ,EAAE,CAAC,aAAa,EAAED,MAAM,CAAC;IACnC;IACA,OAAO,MAAM;MACXP,OAAO,CAACS,GAAG,CAAC,aAAa,EAAEF,MAAM,CAAC;IACpC,CAAC;EACH,CAAC,EAAE,CAACJ,UAAU,EAAEC,MAAM,EAAEC,SAAS,CAAC,CAAC;AACrC,CAAC"}