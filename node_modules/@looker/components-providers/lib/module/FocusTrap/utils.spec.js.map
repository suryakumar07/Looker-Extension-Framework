{"version":3,"file":"utils.spec.js","names":["React","waitFor","render","activateFocusTrap","test","mockMatches","jest","fn","Object","defineProperty","document","value","createElement","activeElement","matches","container","element","expect","toHaveBeenCalledWith"],"sources":["../../../src/FocusTrap/utils.spec.tsx"],"sourcesContent":["/**\n * Copyright (c) 2023 Google LLC\n * SPDX-License-Identifier: MIT\n */\n\nimport React from 'react'\nimport { waitFor, render } from '@testing-library/react'\nimport { activateFocusTrap } from './utils'\n\n// Even though JSDom doesn't natively support :focus-visible, this test still\n// works because we mock matches() and it will not throw.\ntest('activateFocusTrap calls document.activeElement.matches(\":focus-visible\") to focus the first element', async () => {\n  const mockMatches = jest.fn()\n\n  // The activeElement property has only a getter, thus we need to redefine\n  // it using Object.defineProperty.\n  Object.defineProperty(document, 'activeElement', {\n    value: document.createElement('button'),\n  })\n\n  // TS does not see the Object.defineProperty.\n  if (document.activeElement) {\n    document.activeElement.matches = mockMatches\n  }\n\n  const { container } = render(<button>Button</button>)\n  activateFocusTrap({ element: container })\n  await waitFor(() => {\n    expect(mockMatches).toHaveBeenCalledWith(':focus-visible')\n  })\n})\n"],"mappings":";;AAKA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,OAAO,EAAEC,MAAM,QAAQ,wBAAwB;AACxD,SAASC,iBAAiB,QAAQ,SAAS;;AAI3CC,IAAI,CAAC,qGAAqG,EAAE,YAAY;EACtH,MAAMC,WAAW,GAAGC,IAAI,CAACC,EAAE,EAAE;;EAI7BC,MAAM,CAACC,cAAc,CAACC,QAAQ,EAAE,eAAe,EAAE;IAC/CC,KAAK,EAAED,QAAQ,CAACE,aAAa,CAAC,QAAQ;EACxC,CAAC,CAAC;;EAGF,IAAIF,QAAQ,CAACG,aAAa,EAAE;IAC1BH,QAAQ,CAACG,aAAa,CAACC,OAAO,GAAGT,WAAW;EAC9C;EAEA,MAAM;IAAEU;EAAU,CAAC,GAAGb,MAAM,CAAC,6CAAuB,CAAC;EACrDC,iBAAiB,CAAC;IAAEa,OAAO,EAAED;EAAU,CAAC,CAAC;EACzC,MAAMd,OAAO,CAAC,MAAM;IAClBgB,MAAM,CAACZ,WAAW,CAAC,CAACa,oBAAoB,CAAC,gBAAgB,CAAC;EAC5D,CAAC,CAAC;AACJ,CAAC,CAAC"}